<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sri Lanka 360¬∞ - Summer Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'slate-50': '#f8fafc',
                        'slate-100': '#f1f5f9',
                        'slate-200': '#e2e8f0',
                        'slate-300': '#cbd5e1',
                        'slate-600': '#475569',
                        'slate-700': '#334155',
                        'slate-800': '#1e293b',
                        'slate-900': '#0f172a',
                        'blue-50': '#eff6ff',
                        'blue-100': '#dbeafe',
                        'blue-500': '#3b82f6',
                        'blue-600': '#2563eb',
                        'emerald-50': '#ecfdf5',
                        'emerald-100': '#d1fae5',
                        'emerald-500': '#10b981',
                        'amber-50': '#fffbeb',
                        'amber-100': '#fef3c7',
                        'violet-50': '#f5f3ff',
                        'violet-100': '#ede9fe',
                        'teal-50': '#f0fdfa',
                        'teal-100': '#ccfbf1'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'display': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        .countdown-item {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 1px solid #cbd5e1;
        }
        .nav-item {
            transition: all 0.3s ease;
        }
        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .section-hidden {
            display: none;
        }
        .itinerary-day {
            transition: all 0.3s ease;
        }
        .itinerary-day:hover {
            transform: scale(1.02);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-body {
            padding: 24px;
        }
        .close {
            color: #9ca3af;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s;
        }
        .close:hover {
            color: #374151;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen font-sans">
    <!-- Header -->
    <header class="relative h-64 md:h-80 overflow-hidden">
        <img src="https://strapi-imaginary.weroad.it/resource/webp-large/1131/viaggio-di-gruppo-in-sri-lanka.webp" 
             alt="Sri Lanka" 
             class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/70 via-slate-900/40 to-slate-900/20 flex items-center justify-center">
            <div class="text-center text-white">
                <h1 class="text-3xl md:text-5xl font-bold mb-2 font-display tracking-tight">Sri Lanka 360¬∞</h1>
                <p class="text-base md:text-lg opacity-95 mb-4 uppercase tracking-widest font-medium">Summer Edition</p>
                <p class="text-sm md:text-base opacity-85 tracking-wide font-light">18 AGOSTO - 29 AGOSTO 2025</p>
            </div>
        </div>
    </header>

    <!-- Countdown -->
    <section class="py-4 px-4 bg-white border-b border-slate-200">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-lg font-medium mb-4 text-slate-800 uppercase tracking-wider">Countdown alla Partenza</h2>
            <div id="countdown" class="flex justify-center space-x-2 md:space-x-4">
                <div class="countdown-item rounded-lg p-3 text-center min-w-16 shadow-sm">
                    <div id="days" class="text-xl md:text-2xl font-bold text-slate-800">0</div>
                    <div class="text-xs md:text-sm text-slate-600 font-medium">Giorni</div>
                </div>
                <div class="countdown-item rounded-lg p-3 text-center min-w-16 shadow-sm">
                    <div id="hours" class="text-xl md:text-2xl font-bold text-slate-800">0</div>
                    <div class="text-xs md:text-sm text-slate-600 font-medium">Ore</div>
                </div>
                <div class="countdown-item rounded-lg p-3 text-center min-w-16 shadow-sm">
                    <div id="minutes" class="text-xl md:text-2xl font-bold text-slate-800">0</div>
                    <div class="text-xs md:text-sm text-slate-600 font-medium">Min</div>
                </div>
                <div class="countdown-item rounded-lg p-3 text-center min-w-16 shadow-sm">
                    <div id="seconds" class="text-xl md:text-2xl font-bold text-slate-800">0</div>
                    <div class="text-xs md:text-sm text-slate-600 font-medium">Sec</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Info Cards -->
    <section class="py-4 px-4 bg-slate-100">
        <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-3">
            <div class="bg-white rounded-lg p-4 text-center shadow-sm border border-slate-200">
                <div class="text-lg font-bold text-slate-800 mb-1">12</div>
                <div class="text-xs text-slate-600 font-medium">üìÖ Giorni</div>
            </div>
            <div class="bg-white rounded-lg p-4 text-center shadow-sm border border-slate-200">
                <div class="text-lg font-bold text-slate-800 mb-1">13</div>
                <div class="text-xs text-slate-600 font-medium">üë• Persone</div>
            </div>
            <div class="bg-white rounded-lg p-4 text-center shadow-sm border border-slate-200">
                <div class="text-lg font-bold text-slate-800 mb-1">‚àû</div>
                <div class="text-xs text-slate-600 font-medium">üéØ Attivit√†</div>
            </div>
        </div>
    </section>

    <!-- Navigation -->
    <nav class="py-8 px-4 bg-white">
        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button onclick="openModal('dashboard')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üè†</div>
                    <div class="text-sm font-medium text-slate-700">Dashboard</div>
                </button>
                <button onclick="openModal('intro')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üìñ</div>
                    <div class="text-sm font-medium text-slate-700">Intro</div>
                </button>
                <button onclick="openModal('guida')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üèõÔ∏è</div>
                    <div class="text-sm font-medium text-slate-700">Guida SL</div>
                </button>
                <button onclick="openModal('itinerario')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üó∫Ô∏è</div>
                    <div class="text-sm font-medium text-slate-700">Itinerario</div>
                </button>
                <button onclick="openModal('voli')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">‚úàÔ∏è</div>
                    <div class="text-sm font-medium text-slate-700">Voli</div>
                </button>
                <button onclick="openModal('packing')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üéí</div>
                    <div class="text-sm font-medium text-slate-700">Packing List</div>
                </button>

                <button onclick="openModal('checklist')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">‚úÖ</div>
                    <div class="text-sm font-medium text-slate-700">Checklist</div>
                </button>

                <button onclick="openModal('fun')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üéÆ</div>
                    <div class="text-sm font-medium text-slate-700">Fun Zone</div>
                </button>

                <button onclick="openModal('cassa')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üí∞</div>
                    <div class="text-sm font-medium text-slate-700">Cassa Comune</div>
                </button>
                <button onclick="openModal('contatti')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üìû</div>
                    <div class="text-sm font-medium text-slate-700">Info & Contatti</div>
                </button>

                <button onclick="openModal('chisiamo')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üôã‚Äç‚ôÄÔ∏è</div>
                    <div class="text-sm font-medium text-slate-700">Chi Siamo</div>
                </button>
                <button onclick="openModal('foto')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üì∏</div>
                    <div class="text-sm font-medium text-slate-700">Foto</div>
                </button>
                <button onclick="openModal('alimentari')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üçΩÔ∏è</div>
                    <div class="text-sm font-medium text-slate-700">Preferenze Cibo</div>
                </button>
                <button onclick="openModal('app')" class="nav-item bg-slate-50 hover:bg-blue-50 rounded-xl p-4 text-center shadow-sm border border-slate-200 hover:border-blue-200 transition-all duration-200">
                    <div class="text-2xl mb-2">üì±</div>
                    <div class="text-sm font-medium text-slate-700">App Utili</div>
                </button>

            </div>
        </div>
    </nav>

    <!-- Modal -->
    <div id="contentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" class="text-lg font-medium text-gray-800 uppercase tracking-wide"></h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <!-- Internet Solutions Modal -->
    <div id="internetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="text-lg font-medium text-gray-800 uppercase tracking-wide">üì∂ Soluzioni Internet per lo Sri Lanka</h2>
                <span class="close" onclick="closeInternetModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="space-y-6">

                    <!-- eSIM e SIM Internazionali -->
                    <div class="bg-violet-50 rounded-xl p-6 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üì≤ eSIM e SIM Internazionali</h3>
                        
                        <div class="bg-white rounded-lg p-4 border border-violet-200 mb-4">
                            <p class="text-sm text-slate-600 mb-2">
                                <strong>üí° Informazioni Generali:</strong> Sono disponibili diverse tariffe nonch√© sia l'opzione SIM fisica sia eSIM (controllare compatibilit√† telefono).
                            </p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê 1. Airalo</h4>
                                <ul class="text-sm text-slate-600 space-y-1 mb-3">
                                    <li>‚Ä¢ <strong>15 giorni:</strong> 1GB per ‚Ç¨5,50</li>
                                    <li>‚Ä¢ <strong>30 giorni:</strong> 3GB per ‚Ç¨6</li>
                                    <li>‚Ä¢ <strong>30 giorni:</strong> 5GB per ‚Ç¨8</li>
                                    <li>‚Ä¢ <strong>30 giorni:</strong> 10GB per ‚Ç¨10,50</li>
                                    <li>‚Ä¢ <strong>30 giorni:</strong> 20GB per ‚Ç¨16</li>
                                    <li>‚Ä¢ <strong>Tipo:</strong> Solo eSIM</li>
                                </ul>
                                <a href="https://www.airalo.com/it/sri-lanka-esim?srsltid=AfmBOorM0hBVo5Yo3N3sD7_h75NEGMWAdTjZfNQ_SaGcc0ZhX6Wa0cSa" 
                                   target="_blank" 
                                   class="inline-block bg-blue-600 hover:bg-blue-700 text-white text-xs px-3 py-1 rounded-lg transition-colors">
                                    üîó Vai ad Airalo
                                </a>
                            </div>
                            
                            <div class="bg-white rounded-lg p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê 2. Holafly</h4>
                                <ul class="text-sm text-slate-600 space-y-1 mb-3">
                                    <li>‚Ä¢ <strong>Sri Lanka 12 giorni:</strong> Dati illimitati per ‚Ç¨39,90</li>
                                    <li>‚Ä¢ <strong>Tipo:</strong> Solo eSIM</li>
                                </ul>
                                <a href="https://esim.holafly.com/it/esim-sri-lanka/?currency=EUR&cq_src=google_ads&cq_cmp=21384851656&cq_term=&cq_plac=&cq_net=g&cq_plt=gp&tw_source=google&tw_adid=702423708901&tw_campaign=21384851656&gad_source=1&gad_campaignid=21384851656&gclid=CjwKCAjw7_DEBhAeEiwAWKiCCw0-y0_OmgjRcos9j-RX_v9dxXuPux6Nm1SHEd6HRCAi6fgak363XRoCbAQQAvD_BwE" 
                                   target="_blank" 
                                   class="inline-block bg-orange-600 hover:bg-orange-700 text-white text-xs px-3 py-1 rounded-lg transition-colors">
                                    üîó Vai a Holafly
                                </a>
                            </div>
                            
                            <div class="bg-white rounded-lg p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê 3. Mobitel</h4>
                                <ul class="text-sm text-slate-600 space-y-1 mb-3">
                                    <li>‚Ä¢ <strong>Tourist Package:</strong> ~1550 LKR (4-5‚Ç¨) per 30GB/30 giorni</li>
                                    <li>‚Ä¢ <strong>Dove comprare:</strong> Online, aeroporto, negozi Mobitel</li>
                                    <li>‚Ä¢ <strong>Tipo:</strong> SIM fisica e eSIM disponibili</li>
                                    <li>‚Ä¢ <strong>Consiglio:</strong> Si pu√≤ richiedere online o fare un passaggio dallo stand in aeroporto</li>
                                </ul>
                                <div class="bg-orange-50 rounded-lg p-3 border border-orange-200 mb-3">
                                    <p class="text-sm text-orange-800">
                                        <strong>üì¢ IMPORTANTE:</strong> Chi decide di procedere con Mobitel me lo faccia sapere entro domani cos√¨ riferisco i nomi allo stand per facilitare poi l'attivazione e il funzionamento della SIM.
                                    </p>
                                </div>
                                <a href="https://www.mobitel.lk/tourist-plans" 
                                   target="_blank" 
                                   class="inline-block bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded-lg transition-colors">
                                    üîó Vai a Mobitel
                                </a>
                            </div>
                            
                            <div class="bg-white rounded-lg p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê 4. Dialog</h4>
                                <ul class="text-sm text-slate-600 space-y-1 mb-3">
                                    <li>‚Ä¢ <strong>Tourist SIM:</strong> ~1500 LKR (4-5‚Ç¨) per 30GB/30 giorni</li>
                                    <li>‚Ä¢ <strong>Copertura:</strong> Eccellente in tutto il paese</li>
                                    <li>‚Ä¢ <strong>Dove comprare:</strong> Aeroporto, negozi Dialog, supermercati</li>
                                    <li>‚Ä¢ <strong>Tipo:</strong> SIM fisica e eSIM disponibili</li>
                                    <li>‚Ä¢ <strong>Documenti:</strong> Passaporto necessario</li>
                                </ul>
                                <a href="https://www.dialog.lk/buy-best-tourist-sim-plan-in-sri-lanka" 
                                   target="_blank" 
                                   class="inline-block bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded-lg transition-colors">
                                    üîó Vai a Dialog
                                </a>
                            </div>
                        </div>
                        
                        <div class="mt-4 bg-purple-50 rounded-lg p-3 border border-purple-200">
                            <p class="text-sm text-purple-800">üí° <strong>Nota:</strong> Per le eSIM, verificare che il vostro telefono sia compatibile prima dell'acquisto!</p>
                        </div>
                    </div>



                    <!-- Raccomandazioni Finali -->
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üéØ Le Nostre Raccomandazioni</h3>
                        <div class="space-y-3">
                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                <h4 class="font-medium text-green-800 mb-2">ü•á Opzione Migliore: SIM Locale</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>‚úÖ Pi√π economica (3-5‚Ç¨ per tutto il viaggio)</li>
                                    <li>‚úÖ Copertura eccellente ovunque</li>
                                    <li>‚úÖ Velocit√† ottima</li>
                                    <li>‚úÖ Facile da comprare all'aeroporto</li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-blue-200">
                                <h4 class="font-medium text-blue-800 mb-2">ü•à Alternativa: eSIM Airalo</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>‚úÖ Attivazione immediata</li>
                                    <li>‚úÖ Non serve cambiare SIM fisica</li>
                                    <li>‚ùå Pi√π costosa</li>
                                    <li>‚ùå Solo per telefoni compatibili</li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-red-200">
                                <h4 class="font-medium text-red-800 mb-2">üö´ Sconsigliato: Roaming Italiano</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>‚ùå Molto costoso (6-9‚Ç¨ al giorno)</li>
                                    <li>‚ùå Dati limitati</li>
                                    <li>‚ùå Possibili costi extra nascosti</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Consigli Pratici -->
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üí° Consigli Pratici</h3>
                        <ul class="text-sm text-slate-600 space-y-2">
                            <li>‚Ä¢ <strong>All'aeroporto:</strong> I negozi SIM spesso sono aperti 24/7, personale parla inglese</li>
                            <li>‚Ä¢ <strong>Configurazione:</strong> Il personale vi aiuter√† a configurare tutto</li>
                            <li>‚Ä¢ <strong>Backup:</strong> Scaricate mappe offline prima di partire</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Sections -->
    <main class="px-4 pb-8">
        <div class="max-w-4xl mx-auto">
            
            <!-- Dashboard -->
            <section id="dashboard" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">Dashboard</h2>
                <div class="space-y-6">
                    <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-3">Benvenuti nel vostro hub di viaggio!</h3>
                        <p class="text-slate-600">Qui troverete tutte le informazioni essenziali per il nostro viaggio in Sri Lanka. Utilizzate il menu sopra per navigare tra le diverse sezioni.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                            <h4 class="font-semibold text-slate-800 mb-3">Prossimi Step</h4>
                            <ul class="text-slate-600 space-y-1">
                                <li>‚Ä¢ Controllare la checklist</li>
                                <li>‚Ä¢ Preparare i documenti</li>
                                <li>‚Ä¢ Fare la valigia</li>
                                <li>‚Ä¢ Compilare excel per info su arrivo e partenze</li>
                            </ul>
                        </div>
                        <div class="bg-amber-50 rounded-xl p-6 border border-amber-100">
                            <h4 class="font-semibold text-slate-800 mb-3">Contatti Rapidi</h4>
                            <p class="text-slate-700 font-medium">Sabrina (Coordinatrice)</p>
                            <p class="text-sm text-slate-600"><a href="tel:+393477257071" class="text-blue-600 hover:text-blue-800 underline">+39 3477257071</a></p>
                            <p class="text-sm text-slate-600"><a href="mailto:cocosabrina.wr@gmail.com" class="text-blue-600 hover:text-blue-800 underline">cocosabrina.wr@gmail.com</a></p>
                            <p class="text-sm text-slate-600"><a href="mailto:sabrina_coco@hotmail.it" class="text-blue-600 hover:text-blue-800 underline">sabrina_coco@hotmail.it</a></p>
                            <p class="text-sm text-slate-600">üì∏ <a href="https://instagram.com/awild.coco" target="_blank" class="text-blue-600 hover:text-blue-800 underline">@awild.coco</a> (Instagram)</p>
                        </div>
                    </div>
                    
                    <!-- PDF Download Section -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200 mt-6">
                        <div class="text-center">
                            <div class="text-3xl mb-3">üìÑ</div>
                            <h4 class="text-lg font-semibold text-slate-800 mb-3">Guida Offline</h4>
                            <p class="text-slate-600 mb-4 text-sm">
                                Perch√© lasciare che il WiFi dello Sri Lanka decida se puoi accedere alle info? üì∂üòÖ<br>
                                Scarica tutto in PDF e sii libero dalle connessioni capricciose!
                            </p>
                            
                            <button onclick="generatePDF()" 
                                    class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                                <span class="flex items-center justify-center space-x-2">
                                    <span>üì•</span>
                                    <span>Scarica Guida PDF</span>
                                </span>
                            </button>
                            
                            <p class="text-xs text-slate-500 mt-3">
                                üí° Include tutto: itinerario, contatti, consigli e diario del gruppo
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Intro -->
            <section id="intro" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üìñ Introduzione al Viaggio</h2>
                <div class="space-y-6">
                    <!-- WeRoad Content -->
                    <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üåç WeRoad in a Nutshell</h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-medium text-slate-800 mb-3">ü§î Prima volta con WeRoad?</h4>
                                <p class="text-slate-600 mb-4">Allora ti sar√† utile sapere come funziona e cosa aspettarti:</p>
                                <p class="text-slate-600 mb-4">WeRoad propone diversi tipi di viaggio e noi abbiamo scelto uno dei pi√π belli: il <strong>360¬∞</strong>. Questi viaggi sono intensi, pieni di avventure ed esperienze straordinarie. Se hai fortuna, riesci a dormire, ma se hai molta fortuna, dormi forse due ore a notte e ne sei felice perch√© a letto non ci vuoi proprio andare, come i bambini. üõèÔ∏è‚ú®</p>
                                <p class="text-slate-600 mb-4">Da queste parti ci piace conoscere il luogo, ma anche la gente che ci accompagna, che dar√† un sapore particolare e unico all'itinerario: ogni viaggio √® diverso, ma anche ogni gruppo lo √®! üåçüí¨</p>
                                <p class="text-slate-600 mb-4">Nello spirito della scoperta, anche il coordinatore √® uno di voi, un compagno di viaggio. Ben lontano dall'essere una guida in Sri Lanka, sono tanto gasata quanto voi, con la differenza che WeRoad mi fornisce tutti gli strumenti per farvi passare 12 giorni indimenticabili e al tempo stesso farvi dimenticare di tutto il resto. üö∂‚Äç‚ôÄÔ∏èüéâ</p>
                                <p class="text-slate-600 mb-4">Questo √® lo spirito WeRoad, ma se hai ancora domande... sai dove trovarmi! üëãüíå</p>
                            </div>
                            
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-3">üí´ I Valori WeRoad:</h4>
                                <ul class="text-slate-600 space-y-2">
                                    <li>üå± Viaggi autentici e sostenibili</li>
                                    <li>üë• Gruppi piccoli (max 12 persone)</li>
                                    <li>üè† Esperienze locali genuine</li>
                                    <li>‚ù§Ô∏è Community di viaggiatori appassionati</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-violet-50 rounded-xl p-6 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üèùÔ∏è Sri Lanka Summer Edition</h3>
                        <p class="text-slate-600 mb-4">Un'avventura di 12 giorni alla scoperta della "Lacrima dell'Oceano Indiano" üíé. Dalle antiche citt√† storiche alle spiagge paradisiache üèñÔ∏è, dalle piantagioni di t√® üçÉ alle riserve naturali üêò.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">‚ú® Highlights</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>üè∞ Fortezza di Galle patrimonio UNESCO</li>
                                    <li>üêò Safari a Udawalawe National Park</li>
                                    <li>üöÇ Treno panoramico verso Ella</li>
                                    <li>üçÉ Piantagioni di t√® a Nuwara Eliya</li>
                                    <li>üèõÔ∏è Triangolo culturale: Sigiriya, Polonnaruwa, Anuradhapura</li>
                                    <li>üèñÔ∏è Spiagge di Trincomalee e Pasikudah</li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üéØ Esperienze</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>üçõ Cucina locale autentica</li>
                                    <li>üêò Incontri con elefanti</li>
                                    <li>üèñÔ∏è Relax sulle spiagge</li>
                                    <li>üé≠ Cultura e tradizioni</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Guida Sri Lanka -->
            <section id="guida" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üèõÔ∏è Guida Sri Lanka</h2>
                <div class="space-y-6">
                    <div class="bg-teal-50 rounded-xl p-6 border border-teal-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üìö Storia e Cultura</h3>
                        <p class="text-slate-600 mb-3">Lo Sri Lanka vanta oltre 2.500 anni di storia documentata üìú. L'isola fu abitata dai Veddah, popolazioni indigene, prima dell'arrivo dei Sinhalesi nel VI secolo a.C. Il Buddhismo arriv√≤ nel III secolo a.C. e divenne la religione dominante.</p>
                        <p class="text-slate-600 mb-3">Il regno di Anuradhapura (377 a.C. - 1017 d.C.) fu seguito da quello di Polonnaruwa (1055-1212). L'isola sub√¨ poi le dominazioni coloniali: portoghesi üáµüáπ (1505-1658), olandesi üá≥üá± (1658-1796) e britanniche üá¨üáß (1796-1948).</p>
                        <p class="text-slate-600">Il paese ottenne l'indipendenza nel 1948 come Ceylon, diventando Sri Lanka nel 1972. La cultura √® un mix affascinante di tradizioni antiche e influenze coloniali ‚ú®.</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                            <h4 class="font-medium text-slate-800 mb-2">üôè Religione</h4>
                            <p class="text-slate-600">70% Buddhista ‚ò∏Ô∏è, 12% Hindu üïâÔ∏è, 10% Musulmana ‚ò™Ô∏è, 8% Cristiana ‚úùÔ∏è</p>
                        </div>
                        <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-100">
                            <h4 class="font-medium text-slate-800 mb-2">üó£Ô∏è Lingue</h4>
                            <p class="text-slate-600">Sinhala, Tamil, Inglese (ampiamente parlato) üåç</p>
                        </div>
                        <div class="bg-violet-50 rounded-xl p-4 border border-violet-100">
                            <h4 class="font-medium text-slate-800 mb-2">üå°Ô∏è Clima ad Agosto</h4>
                            <p class="text-slate-600 mb-2">Agosto √® considerato un mese di transizione, il che significa che alcune aree sono pi√π secche e accessibili rispetto ad altre.</p>
                            <p class="text-slate-600 mb-2"><strong>Temperature:</strong> Le temperature variano generalmente tra i 25¬∞C e i 30¬∞C, con un clima tropicale caldo e umido in gran parte dell'isola.</p>
                            <p class="text-slate-600"><strong>Precipitazioni:</strong> Ad agosto, il monsone di sud-ovest interessa principalmente le coste occidentali e meridionali, portando piogge moderate. Tuttavia, il lato orientale e nord-orientale dell'isola presenta un clima pi√π asciutto e favorevole per il turismo balneare.</p>
                        </div>
                    </div>

                    <!-- Luoghi del nostro itinerario -->
                    <div class="bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-6 border border-amber-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üó∫Ô∏è I Luoghi del Nostro Viaggio</h3>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèñÔ∏è Negombo - La Porta d'Ingresso</h4>
                                <p class="text-slate-600 text-sm">Citt√† costiera a 37 km dall'aeroporto, famosa per il suo mercato del pesce e le spiagge dorate. Ex centro del commercio della cannella durante il periodo coloniale.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üè∞ Galle - La Fortezza UNESCO</h4>
                                <p class="text-slate-600 text-sm">Citt√† storica sulla costa meridionale, patrimonio UNESCO. Il forte coloniale meglio conservato dell'Asia, costruito dai portoghesi nel 1588 e ampliato dagli olandesi.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üêò Udawalawe National Park - Regno degli Elefanti</h4>
                                <p class="text-slate-600 text-sm">Parco nazionale creato nel 1972, famoso per la pi√π grande popolazione di elefanti dello Sri Lanka (circa 500 esemplari). Habitat ideale anche per bufali d'acqua, coccodrilli e oltre 180 specie di uccelli.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèîÔ∏è Ella - Il Paradiso delle Montagne</h4>
                                <p class="text-slate-600 text-sm">Piccola citt√† di montagna a 1.041m di altitudine, circondata da piantagioni di t√® e montagne verdi. Famosa per i trekking e i panorami mozzafiato.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üçÉ Nuwara Eliya - La Piccola Inghilterra</h4>
                                <p class="text-slate-600 text-sm">Citt√† collinare a 1.868m, soprannominata "Little England" per il clima fresco e l'architettura coloniale britannica. Centro della produzione del famoso t√® Ceylon.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üëë Kandy - L'Antica Capitale</h4>
                                <p class="text-slate-600 text-sm">Ultima capitale del regno singalese (1469-1815), patrimonio UNESCO. Centro spirituale del Buddhismo, custodisce la reliquia del dente di Buddha.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèõÔ∏è Dambulla - Le Grotte Dorate</h4>
                                <p class="text-slate-600 text-sm">Complesso di templi rupestri del I secolo a.C., patrimonio UNESCO. Cinque grotte con oltre 150 statue di Buddha e affreschi che coprono 2.100 m¬≤ di pareti e soffitti.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">ü¶Å Sigiriya - La Roccia del Leone</h4>
                                <p class="text-slate-600 text-sm">Fortezza rocciosa del V secolo, patrimonio UNESCO. Antica capitale costruita dal re Kashyapa, famosa per gli affreschi delle "Fanciulle delle Nuvole" e i giardini acquatici.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèõÔ∏è Polonnaruwa - La Citt√† Medievale</h4>
                                <p class="text-slate-600 text-sm">Seconda antica capitale dello Sri Lanka (1055-1212), patrimonio UNESCO. Citt√† medievale meglio conservata, con palazzi, templi e statue monumentali.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèñÔ∏è Trincomalee - La Baia Perfetta</h4>
                                <p class="text-slate-600 text-sm">Porto naturale sulla costa orientale, considerato uno dei migliori al mondo. Famosa per le spiagge incontaminate, il tempio di Koneswaram e l'osservazione delle balene.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèñÔ∏è Pasikudah - La Spiaggia da Sogno <span class="text-xs text-amber-600 font-medium">(Alternativa a Trincomalee)</span></h4>
                                <p class="text-slate-600 text-sm">Una delle spiagge pi√π belle dello Sri Lanka, con acque cristalline e sabbia bianca. Baia poco profonda ideale per nuotare, con barriera corallina per lo snorkeling. <strong>Destinazione alternativa a Trincomalee</strong> per il relax balneare sulla costa orientale.</p>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üèõÔ∏è Anuradhapura - La Prima Capitale</h4>
                                <p class="text-slate-600 text-sm">Prima capitale dello Sri Lanka (377 a.C. - 1017 d.C.), patrimonio UNESCO. Citt√† sacra del Buddhismo con l'albero di Bodhi pi√π antico del mondo e dagoba monumentali.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Triangolo Culturale -->
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üî∫ Il Triangolo Culturale</h3>
                        <p class="text-slate-600 mb-4">Il cuore storico dello Sri Lanka formato da tre antiche capitali: <strong>Anuradhapura</strong>, <strong>Polonnaruwa</strong> e <strong>Kandy</strong>. Questa regione racchiude oltre 2.000 anni di storia, arte e spiritualit√† buddhista.</p>
                        
                        <div class="bg-white rounded-xl p-4 border border-purple-200">
                            <h4 class="font-medium text-slate-800 mb-3">üèõÔ∏è Patrimoni UNESCO che Visiteremo</h4>
                            <ul class="text-sm text-slate-600 space-y-1">
                                <li>‚Ä¢ <strong>Anuradhapura</strong> - Citt√† sacra (1982)</li>
                                <li>‚Ä¢ <strong>Polonnaruwa</strong> - Citt√† antica (1982)</li>
                                <li>‚Ä¢ <strong>Kandy</strong> - Citt√† sacra (1988)</li>
                                <li>‚Ä¢ <strong>Dambulla</strong> - Tempio d'oro (1991)</li>
                                <li>‚Ä¢ <strong>Sigiriya</strong> - Fortezza antica (1982)</li>
                                <li>‚Ä¢ <strong>Galle</strong> - Citt√† vecchia e fortificazioni (1988)</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Consigli Pratici -->
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üí° Consigli Pratici per i Siti</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-green-200">
                                <h4 class="font-medium text-slate-800 mb-3">üèõÔ∏è Templi e Siti Religiosi</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>‚Ä¢ Vestiti coprendo spalle e gambe</li>
                                    <li>‚Ä¢ Togliere scarpe e cappelli</li>
                                    <li>‚Ä¢ Non voltare le spalle alle statue di Buddha</li>
                                    <li>‚Ä¢ Portare calzini per camminare</li>
                                    <li>‚Ä¢ Rispettare il silenzio durante le preghiere</li>
                                </ul>
                            </div>
                            
                            <div class="bg-white rounded-xl p-4 border border-green-200">
                                <h4 class="font-medium text-slate-800 mb-3">üèîÔ∏è Siti Archeologici</h4>
                                <ul class="text-sm text-slate-600 space-y-1">
                                    <li>‚Ä¢ Iniziare presto per evitare il caldo</li>
                                    <li>‚Ä¢ Portare acqua e cappello</li>
                                    <li>‚Ä¢ Scarpe comode per camminare</li>
                                    <li>‚Ä¢ Crema solare (il sole √® forte)</li>
                                    <li>‚Ä¢ Macchina fotografica carica</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Itinerario -->
            <section id="itinerario" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üó∫Ô∏è Itinerario Dettagliato</h2>
                <div class="space-y-4">
                    <div class="itinerary-day bg-blue-50 rounded-xl p-5 border border-blue-100">
                        <h3 class="font-semibold text-slate-800">‚úàÔ∏è Giorno 1 - Arrivo a Negombo</h3>
                    </div>
                    
                    <div class="itinerary-day bg-emerald-50 rounded-xl p-5 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800">üè∞ Giorno 2 - Galle</h3>
                    </div>

                    <div class="itinerary-day bg-amber-50 rounded-xl p-5 border border-amber-100">
                        <h3 class="font-semibold text-slate-800">üêò Giorno 3 - Udawalawe National Park</h3>
                    </div>

                    <div class="itinerary-day bg-violet-50 rounded-xl p-5 border border-violet-100">
                        <h3 class="font-semibold text-slate-800">üöÇ Giorno 4 - Ella</h3>
                    </div>

                    <div class="itinerary-day bg-teal-50 rounded-xl p-5 border border-teal-100">
                        <h3 class="font-semibold text-slate-800">üçÉ Giorno 5 - Distretto di Nuwara Eliya</h3>
                    </div>

                    <div class="itinerary-day bg-blue-50 rounded-xl p-5 border border-blue-100">
                        <h3 class="font-semibold text-slate-800">üëë Giorno 6 - Kandy</h3>
                    </div>

                    <div class="itinerary-day bg-emerald-50 rounded-xl p-5 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800">üèõÔ∏è Giorno 7 - Dambulla</h3>
                    </div>

                    <div class="itinerary-day bg-amber-50 rounded-xl p-5 border border-amber-100">
                        <h3 class="font-semibold text-slate-800">ü¶Å Giorno 8 - Sigiriya e Polonnaruwa</h3>
                    </div>

                    <div class="itinerary-day bg-violet-50 rounded-xl p-5 border border-violet-100">
                        <h3 class="font-semibold text-slate-800">üèñÔ∏è Giorno 9 - Trincomalee/Pasikudah</h3>
                    </div>

                    <div class="itinerary-day bg-teal-50 rounded-xl p-5 border border-teal-100">
                        <h3 class="font-semibold text-slate-800">üèñÔ∏è Giorno 10 - Trincomalee/Pasikudah</h3>
                    </div>

                    <div class="itinerary-day bg-blue-50 rounded-xl p-5 border border-blue-100">
                        <h3 class="font-semibold text-slate-800">üèõÔ∏è Giorno 11 - Anuradhapura</h3>
                    </div>

                    <div class="itinerary-day bg-emerald-50 rounded-xl p-5 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800">‚úàÔ∏è Giorno 12 - Negombo/Colombo - Partenza</h3>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Voli -->
            <section id="voli" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">‚úàÔ∏è Informazioni Voli</h2>
                <div class="bg-blue-50 rounded-xl p-6 mb-6 border border-blue-100">
                    <p class="text-slate-600 mb-3">Per i dettagli completi sui voli, consultare il documento condiviso:</p>
                    <a href="https://docs.google.com/spreadsheets/d/1-PNY6tGfJt9N0XqVvHytJa-K6aFCYxxi9S6cjSIuc_s/edit?pli=1&gid=0#gid=0" 
                       target="_blank" 
                       class="inline-block bg-white px-6 py-3 rounded-lg font-medium text-slate-800 hover:bg-slate-50 transition-colors border border-slate-200 shadow-sm">
                        üìä Visualizza Tabella Voli
                    </a>
                </div>
                <div class="space-y-4">
                    <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-3">Informazioni Generali</h3>
                        <ul class="text-slate-600 space-y-2">
                            <li>‚Ä¢ Check-in online 24h prima</li>
                            <li>‚Ä¢ Arrivo in aeroporto 3h prima per voli internazionali</li>
                            <li>‚Ä¢ Bagaglio a mano: max 8kg</li>
                            <li>‚Ä¢ Bagaglio in stiva: generalmente 20-30kg</li>
                            <li>‚Ä¢ ‚ö†Ô∏è √à fondamentale controllare sempre le disposizioni della propria compagnia aerea e le informazioni specifiche della propria prenotazione</li>
                        </ul>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Packing List -->
            <section id="packing" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üéí Packing List</h2>
                
                <div class="bg-blue-50 rounded-xl p-6 mb-6 border border-blue-100">
                    <p class="text-slate-600 mb-3">Alcuni elementi in lista chiaramente sono consigliati e non obbligatori, soprattutto per quanto riguarda le quantit√†: vi comunico un numero adeguato per facilitarvi nel momento valigia, ma ovviamente √® tutto molto personale! üòä</p>
                    <p class="text-slate-600 mb-3">Sicuramente, consiglio per esperienza di non caricare troppo lo zaino, perch√© gireremo tanto e faremo fatica a trasportare ma anche a trovare tutto ogni volta che dovremo fare e disfare la valigia. üòÅ</p>
                    <p class="text-slate-600 mb-3">Vi consiglio anche di utilizzare delle sacche per suddividere i vari indumenti/oggetti in modo appunto da trovarli subito tra una tappa e l'altra.</p>
                    <p class="text-slate-600 font-medium">√à fortemente consigliato (in teoria mezzo obbligatorio) utilizzare uno zaino come bagaglio. üéí</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-amber-50 rounded-xl p-6 border border-amber-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üëï Abbigliamento</h3>
                        <ul class="text-slate-600 space-y-2">
                            <li>‚Ä¢ Magliette leggere (evita abbigliamento troppo scoperto nei siti religiosi) <span class="font-medium">{5-7}</span></li>
                            <li>‚Ä¢ Pantaloni leggeri o gonne lunghe (per cultura e trekking) <span class="font-medium">{2-3}</span></li>
                            <li>‚Ä¢ Pantaloncini leggeri (ad es. per spiaggia) <span class="font-medium">{2}</span></li>
                            <li>‚Ä¢ Giacca leggera e/o felpa per le mattine e serate pi√π fresche</li>
                            <li>‚Ä¢ Impermeabile o poncho (per eventuali pioggerelle)</li>
                            <li>‚Ä¢ Sarong o simili (copertura per templi)</li>
                            <li>‚Ä¢ Costumi da bagno + teli da spiaggia</li>
                            <li>‚Ä¢ Calzini (utili anche per la visita ai templi dove bisogna stare scalzi)</li>
                        </ul>
                    </div>
                    
                    <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üëü Scarpe e Accessori da Trekking</h3>
                        <ul class="text-slate-600 space-y-2">
                            <li>‚Ä¢ Scarpe da trekking o comunque comode per camminare (meglio se non nuovissime üòÖ meno rischio vesciche)</li>
                            <li>‚Ä¢ Sandali e/o infradito per la spiaggia o docce/hotel</li>
                            <li>‚Ä¢ Eventualmente scarpe impermeabili per le escursioni in corsi d'acqua</li>
                        </ul>
                    </div>

                    <div class="bg-violet-50 rounded-xl p-6 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-4">‚òÄÔ∏è Protezione Solare e Repellenti</h3>
                        <ul class="text-slate-600 space-y-2">
                            <li>‚Ä¢ Crema solare (SPF 30+ o pi√π)</li>
                            <li>‚Ä¢ Cappello o cappellino</li>
                            <li>‚Ä¢ Repellente per insetti (ad es. Jungle)</li>
                        </ul>
                    </div>

                    <div class="bg-teal-50 rounded-xl p-6 border border-teal-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üéí Varie ed Eventuali</h3>
                        <ul class="text-slate-600 space-y-2">
                            <li>‚Ä¢ Zainetto per escursioni</li>
                            <li>‚Ä¢ Torcia per le escursioni mattutine o serali</li>
                            <li>‚Ä¢ Medicine di base: analgesici, antidiarroici, antistaminici, farmaci contro la nausea</li>
                            <li>‚Ä¢ Cerotti</li>
                            <li>‚Ä¢ Gel igienizzante mani</li>
                            <li>‚Ä¢ Caricabatterie, power bank</li>
                            <li>‚Ä¢ Adattatore universale: in Sri Lanka si usano prese tipo G a 230 V / 50 Hz. In particolare in alcune zone pu√≤ essere necessario l'adattatore BS546</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-blue-50 rounded-xl p-6 mt-6 border border-blue-100">
                    <h3 class="font-semibold text-slate-800 mb-4">üìã Documenti</h3>
                    <ul class="text-slate-600 space-y-2">
                        <li>‚Ä¢ Passaporto (con visto), copie digitali dei propri documenti</li>
                        <li>‚Ä¢ Visto</li>
                        <li>‚Ä¢ Arrival Card</li>
                    </ul>
                </div>


            </section>

            <!-- Checklist -->
            <section id="checklist" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">‚úÖ Checklist Pre-Partenza</h2>
                <div class="space-y-6">
                    <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üìã Documenti (da fare ASAP)</h3>
                        <ul class="text-slate-600 space-y-3">
                            <li>‚Ä¢ Richiedere ETA (Electronic Travel Authorization)</li>
                            <li>‚Ä¢ Compilare Arrival Card online</li>
                            <li>‚Ä¢ Verificare validit√† passaporto (min. 6 mesi)</li>
                        </ul>
                    </div>
                    <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üí∞ Banca e Denaro</h3>
                        <ul class="text-slate-600 space-y-3">
                            <li>‚Ä¢ Avvisare la banca del viaggio</li>
                            <li>‚Ä¢ Verificare limiti prelievo all'estero</li>
                            <li>‚Ä¢ Prelevare contanti per cambio locale</li>
                        </ul>
                    </div>
                    <div class="bg-amber-50 rounded-xl p-6 border border-amber-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üè• Salute</h3>
                        <ul class="text-slate-600 space-y-3">
                            <li>‚Ä¢ Copia assicurazione WeRoad</li>
                            <li>‚Ä¢ Preparare kit farmaci personali</li>
                        </ul>
                    </div>
                    <div class="bg-violet-50 rounded-xl p-6 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üì± Tecnologia</h3>
                        <ul class="text-slate-600 space-y-3">
                            <li>‚Ä¢ Scaricare app offline (Maps.me, Google Translate)</li>
                            <li>‚Ä¢ Verificare piano dati roaming o acquistare SIM locale
                                <div class="mt-2">
                                    <button onclick="openInternetSolutionsModal()" 
                                            class="bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium py-2 px-3 rounded-lg transition-colors duration-200">
                                        üì∂ Soluzioni Internet Consigliate
                                    </button>
                                </div>
                            </li>
                            <li>‚Ä¢ Caricare power bank e portare caricabatterie</li>
                            <li>‚Ä¢ Backup foto e documenti su cloud</li>
                        </ul>
                    </div>
                    <div class="bg-teal-50 rounded-xl p-6 border border-teal-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üéí Ultimo Check</h3>
                        <ul class="text-slate-600 space-y-3">
                            <li>‚Ä¢ Controllare peso bagaglio</li>
                            <li>‚Ä¢ Preparare bagaglio a mano con essenziali</li>
                            <li>‚Ä¢ Stampare documenti importanti (backup)</li>
                            <li>‚Ä¢ Informare famiglia/amici dell'itinerario</li>
                        </ul>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Fun Zone -->
            <section id="fun" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üéÆ Fun Zone</h2>
                
                <!-- Navigation Tabs -->
                <div class="flex flex-wrap gap-2 mb-6">
                    <button onclick="showFunSection('minivan')" id="tab-minivan" class="fun-tab active bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        üöê Minivan
                    </button>
                    <button onclick="showFunSection('shuffle')" id="tab-shuffle" class="fun-tab bg-slate-200 text-slate-700 hover:bg-slate-300 px-4 py-2 rounded-lg font-medium transition-colors">
                        üîÄ Shuffle
                    </button>
                    <button onclick="showFunSection('daily')" id="tab-daily" class="fun-tab bg-slate-200 text-slate-700 hover:bg-slate-300 px-4 py-2 rounded-lg font-medium transition-colors">
                        üí≠ Domanda del Giorno
                    </button>
                    <button onclick="showFunSection('awards')" id="tab-awards" class="fun-tab bg-slate-200 text-slate-700 hover:bg-slate-300 px-4 py-2 rounded-lg font-medium transition-colors">
                        üèÜ Awards
                    </button>
                    <button onclick="showFunSection('camere')" id="tab-camere" class="fun-tab bg-slate-200 text-slate-700 hover:bg-slate-300 px-4 py-2 rounded-lg font-medium transition-colors">
                        üè® Camere
                    </button>
                    <button onclick="showFunSection('quiz')" id="tab-quiz" class="fun-tab bg-slate-200 text-slate-700 hover:bg-slate-300 px-4 py-2 rounded-lg font-medium transition-colors">
                        üß† Quiz
                    </button>
                    <button onclick="showFunSection('diario')" id="tab-diario" class="fun-tab bg-slate-200 text-slate-700 hover:bg-slate-300 px-4 py-2 rounded-lg font-medium transition-colors">
                        üìñ Diario
                    </button>
                </div>

                <!-- Minivan Section -->
                <div id="fun-minivan" class="fun-content">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üöê Il Nostro Minivan</h3>
                        <p class="text-slate-600 mb-4">Benvenuti nella vostra nuova casa mobile per 12 giorni! Il minivan sar√† testimone di tutto: dalle vostre battute geniali alle vostre crisi esistenziali, dai vostri momenti di gloria ai vostri epic fail. Preparatevi a conoscervi MOLTO bene! üòÖ</p>
                        
                        <div class="bg-white rounded-xl p-4 border border-slate-200">
                            <h4 class="font-medium text-slate-800 mb-3">üìã Le Uniche Regole che Contano</h4>
                            <ul class="text-sm text-slate-600 space-y-2">
                                <li>‚Ä¢ üéµ <strong>Playlist condivisa</strong> - Ognuno pu√≤ aggiungere le proprie canzoni (ma se metti "Despacito" per la 47¬™ volta, ti lasciamo a piedi)<br>
                                    <a href="https://open.spotify.com/playlist/5qwzkt20qQqHCKMc3p4cg3?si=bnVoh_P_QPWI-qGJ3rAbrg&pt=56f0e50a77d8744e2ff72d779282d8c5" target="_blank" class="inline-block mt-2 bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors">
                                        üéß Apri Playlist Spotify
                                    </a>
                                </li>
                                <li>‚Ä¢ üì± <strong>Foto di gruppo</strong> - Almeno una foto tutti insieme ogni giorno (anche quando sembrate zombie)</li>
                                <li>‚Ä¢ üßπ <strong>Pulizia</strong> - Lasciamo il minivan come lo abbiamo trovato (o almeno proviamoci)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Shuffle Section -->
                <div id="fun-shuffle" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üîÄ Shuffle Giornaliero</h3>
                        <p class="text-slate-600 mb-6">Ogni giorno nuovi gruppi per scoprire lati nascosti dei compagni di viaggio! Ogni gruppo deve fare almeno un selfie/foto insieme durante il momento pi√π bello della giornata. üì∏‚ú®</p>
                        
                        <!-- Day Selector -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <h4 class="font-medium text-slate-800 mb-3">üìÖ Seleziona il Giorno</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <button onclick="showShuffleGroups(1)" class="shuffle-day-btn bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 1
                                </button>
                                <button onclick="showShuffleGroups(2)" class="shuffle-day-btn bg-emerald-100 hover:bg-emerald-200 text-emerald-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 2
                                </button>
                                <button onclick="showShuffleGroups(3)" class="shuffle-day-btn bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 3
                                </button>
                                <button onclick="showShuffleGroups(4)" class="shuffle-day-btn bg-violet-100 hover:bg-violet-200 text-violet-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 4
                                </button>
                                <button onclick="showShuffleGroups(5)" class="shuffle-day-btn bg-teal-100 hover:bg-teal-200 text-teal-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 5
                                </button>
                                <button onclick="showShuffleGroups(6)" class="shuffle-day-btn bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 6
                                </button>
                                <button onclick="showShuffleGroups(7)" class="shuffle-day-btn bg-emerald-100 hover:bg-emerald-200 text-emerald-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 7
                                </button>
                                <button onclick="showShuffleGroups(8)" class="shuffle-day-btn bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 8
                                </button>
                                <button onclick="showShuffleGroups(9)" class="shuffle-day-btn bg-violet-100 hover:bg-violet-200 text-violet-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 9
                                </button>
                                <button onclick="showShuffleGroups(10)" class="shuffle-day-btn bg-teal-100 hover:bg-teal-200 text-teal-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 10
                                </button>
                                <button onclick="showShuffleGroups(11)" class="shuffle-day-btn bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 11
                                </button>
                                <button onclick="showShuffleGroups(12)" class="shuffle-day-btn bg-emerald-100 hover:bg-emerald-200 text-emerald-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                    Giorno 12
                                </button>
                            </div>
                        </div>

                        <!-- Groups Display -->
                        <div id="shuffleGroupsDisplay" class="bg-white rounded-xl p-6 border border-orange-200">
                            <div class="text-center text-slate-500">
                                <div class="text-4xl mb-3">üîÄ</div>
                                <p>Seleziona un giorno per vedere i gruppi shuffle!</p>
                                <p class="text-sm mt-2">Ogni gruppo deve fare almeno una foto insieme nel momento pi√π bello della giornata! üì∏</p>
                            </div>
                        </div>

                        <!-- Random Shuffle Generator -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-6">
                            <h4 class="font-medium text-slate-800 mb-3">üé≤ Genera Shuffle Casuale</h4>
                            <p class="text-sm text-slate-600 mb-3">Vuoi creare nuovi gruppi casuali? Clicca qui per un mix completamente nuovo!</p>
                            <button onclick="generateRandomShuffle()" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                                üîÄ Genera Gruppi Casuali
                            </button>
                            <div id="randomShuffleDisplay" class="mt-4 hidden">
                                <!-- Random shuffle will appear here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Question Section -->
                <div id="fun-daily" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üí≠ Domanda del Giorno</h3>
                        <p class="text-slate-600 mb-6">Ogni giorno una domanda diversa. Rispondete quando volete. Non ci sono risposte giuste o sbagliate... solo risposte che ci faranno conoscere meglio! üòÑ</p>
                        
                        <div class="space-y-4">
                            <!-- Day Selector -->
                            <div class="bg-white rounded-xl p-4 border border-purple-200">
                                <h4 class="font-medium text-slate-800 mb-3">üìÖ Seleziona il Giorno</h4>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                    <button onclick="showDailyQuestion(1)" class="daily-day-btn bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 1
                                    </button>
                                    <button onclick="showDailyQuestion(2)" class="daily-day-btn bg-emerald-100 hover:bg-emerald-200 text-emerald-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 2
                                    </button>
                                    <button onclick="showDailyQuestion(3)" class="daily-day-btn bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 3
                                    </button>
                                    <button onclick="showDailyQuestion(4)" class="daily-day-btn bg-violet-100 hover:bg-violet-200 text-violet-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 4
                                    </button>
                                    <button onclick="showDailyQuestion(5)" class="daily-day-btn bg-teal-100 hover:bg-teal-200 text-teal-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 5
                                    </button>
                                    <button onclick="showDailyQuestion(6)" class="daily-day-btn bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 6
                                    </button>
                                    <button onclick="showDailyQuestion(7)" class="daily-day-btn bg-emerald-100 hover:bg-emerald-200 text-emerald-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 7
                                    </button>
                                    <button onclick="showDailyQuestion(8)" class="daily-day-btn bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 8
                                    </button>
                                    <button onclick="showDailyQuestion(9)" class="daily-day-btn bg-violet-100 hover:bg-violet-200 text-violet-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 9
                                    </button>
                                    <button onclick="showDailyQuestion(10)" class="daily-day-btn bg-teal-100 hover:bg-teal-200 text-teal-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 10
                                    </button>
                                    <button onclick="showDailyQuestion(11)" class="daily-day-btn bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 11
                                    </button>
                                    <button onclick="showDailyQuestion(12)" class="daily-day-btn bg-emerald-100 hover:bg-emerald-200 text-emerald-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                        Giorno 12
                                    </button>
                                </div>
                            </div>

                            <!-- Question Display -->
                            <div id="dailyQuestionDisplay" class="bg-white rounded-xl p-6 border border-purple-200">
                                <div class="text-center text-slate-500">
                                    <div class="text-4xl mb-3">ü§î</div>
                                    <p>Seleziona un giorno per vedere la domanda!</p>
                                </div>
                            </div>

                            <!-- Random Question Generator -->
                            <div class="bg-white rounded-xl p-4 border border-purple-200">
                                <h4 class="font-medium text-slate-800 mb-3">üé≤ Domanda Random</h4>
                                <p class="text-sm text-slate-600 mb-3">Non vuoi aspettare? Genera una domanda casuale!</p>
                                <button onclick="generateRandomQuestion()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                                    üéØ Genera Domanda Random
                                </button>
                                <div id="randomQuestionDisplay" class="mt-4 hidden">
                                    <!-- Random question will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Awards Section -->
                <div id="fun-awards" class="fun-content hidden">
                    <div class="space-y-6">
                        <div class="bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-6 border border-amber-200">
                            <h3 class="font-semibold text-slate-800 mb-4">üèÜ Vota gli Awards del Viaggio</h3>
                            
                            <div class="bg-white rounded-xl p-4 border border-amber-200">
                                <h4 class="font-medium text-slate-800 mb-3">üèÜ Tutte le Categorie Awards</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="space-y-3">
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üèÉ‚Äç‚ôÇÔ∏è Energizer Bunny</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="energizer">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üì∏ Fotografo Ufficiale</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="fotografo">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üó∫Ô∏è Navigator</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="navigator">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üçõ Food Explorer</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="foodexplorer">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üòÇ Comedian</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="comedian">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">ü§ù Team Player</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="teamplayer">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üåÖ Early Bird</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="earlybird">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üéí Packing Master</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="packingmaster">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üò¥ Sleeping Beauty</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="sleepingbeauty">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üêå Slow Motion</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="slowmotion">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üß≥ Overpacker</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="overpacker">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üì± Social Media Star</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="socialmedia">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">ü§î Philosopher</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="philosopher">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üçï Picky Eater</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="pickyeater">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üó£Ô∏è Chatterbox</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="chatterbox">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                        
                                        <div class="award-category">
                                            <div class="text-sm font-medium text-slate-700 mb-2">üß≠ Wrong Way</div>
                                            <select class="award-select w-full px-2 py-1 border border-slate-300 rounded text-sm" data-award="wrongway">
                                                <option value="">Vota...</option>
                                                <option value="alessiab">Alessia B</option>
                                                <option value="alessiaa">Alessia A</option>
                                                <option value="giacomo">Giacomo</option>
                                                <option value="martina">Martina</option>
                                                <option value="noemi">Noemi</option>
                                                <option value="salvatore">Salvatore</option>
                                                <option value="nicolo">Nicol√≤</option>
                                                <option value="marco">Marco</option>
                                                <option value="marlen">Marlen</option>
                                                <option value="matteo">Matteo</option>
                                                <option value="dario">Dario</option>
                                                <option value="francesco">Francesco</option>
                                                <option value="giulio">Giulio</option>
                                                <option value="sabrina">Sabrina</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl p-4 border border-amber-200 mt-4">
                                <div class="flex justify-between items-center mb-3">
                                    <h4 class="font-medium text-slate-800">Chi sta votando?</h4>
                                </div>
                                <select id="voterName" class="w-full px-3 py-2 border border-slate-300 rounded-lg mb-4">
                                    <option value="">Seleziona il tuo nome...</option>
                                    <option value="Alessia B">Alessia B</option>
                                    <option value="Alessia A">Alessia A</option>
                                    <option value="Giacomo">Giacomo</option>
                                    <option value="Martina">Martina</option>
                                    <option value="Noemi">Noemi</option>
                                    <option value="Salvatore">Salvatore</option>
                                    <option value="Nicol√≤">Nicol√≤</option>
                                    <option value="Marco">Marco</option>
                                    <option value="Marlen">Marlen</option>
                                    <option value="Matteo">Matteo</option>
                                    <option value="Dario">Dario</option>
                                    <option value="Francesco">Francesco</option>
                                    <option value="Giulio">Giulio</option>
                                    <option value="Sabrina">Sabrina</option>
                                </select>
                                <button onclick="submitVotes()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200">
                                    üó≥Ô∏è Invia Voti
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Camere Section -->
                <div id="fun-camere" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border border-teal-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üè® Sorteggio Camere</h3>
                        <p class="text-slate-600 mb-6">Genera combinazioni casuali per le camere! Perfetto per decidere chi sta con chi ogni notte. üòÑ</p>
                        
                        <!-- Simple Configuration -->
                        <div class="bg-white rounded-xl p-4 border border-teal-200 mb-6">
                            <div class="mb-4">
                                <label class="flex items-center mb-3">
                                    <input type="checkbox" id="allowMixed" class="mr-2">
                                    <span class="text-sm text-slate-700">Consenti camere miste (uomini e donne insieme)</span>
                                </label>
                                <p class="text-xs text-slate-500 mb-3">üí° Se spuntato: camere possono essere miste (uomini e donne insieme)</p>
                                <p class="text-xs text-slate-500 mb-4">Se non spuntato: camere separate per genere (solo uomini o solo donne)</p>
                                
                                <label class="flex items-center">
                                    <input type="checkbox" id="allowTriple" class="mr-2">
                                    <span class="text-sm text-slate-700">Consenti camere triple (normalmente sono doppie)</span>
                                </label>
                                <p class="text-xs text-slate-500 mt-1">üí° Se spuntato: possono essere create camere da 3 persone</p>
                                <p class="text-xs text-slate-500">Se non spuntato: solo camere doppie (max 2 persone per camera)</p>
                            </div>
                            
                            <div class="bg-blue-50 rounded-lg p-3 border border-blue-200">
                                <h6 class="text-sm font-medium text-blue-800 mb-2">‚ÑπÔ∏è Coppie Fisse:</h6>
                                <div class="text-xs text-blue-700">
                                    <strong>Noemi & Salvatore</strong> e <strong>Dario & Francesco</strong> sono sempre insieme.<br>
                                    Gli altri 9 partecipanti vengono sorteggiati secondo le regole scelte.
                                </div>
                            </div>
                        </div>

                        <!-- Random Room Generator -->
                        <div class="bg-white rounded-xl p-4 border border-teal-200">
                            <div class="space-y-3">
                                <button onclick="generateRandomRooms()" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-medium py-3 px-4 rounded-lg transition-colors text-lg">
                                    üé≤ SORTEGGIA CAMERE!
                                </button>
                                <button onclick="resetRooms()" class="w-full bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium py-2 px-4 rounded-lg transition-colors text-sm">
                                    üîÑ Reset Camere
                                </button>
                            </div>
                            <p class="text-center text-xs text-slate-500 mt-2">Clicca per generare una nuova combinazione casuale</p>
                            
                            <div id="randomRoomsDisplay" class="mt-6 hidden">
                                <!-- Random rooms will appear here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quiz Section -->
                <div id="fun-quiz" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üéÆ Sri Lanka Trivia Challenge</h3>
                        
                        <div class="bg-white rounded-xl p-6 border border-green-200">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-medium text-slate-800">üß† Quiz Interattivo</h4>
                            </div>
                            
                            <p class="text-sm text-slate-600 mb-4">Quiz a punti su cultura, animali, piatti tipici... e qualche domanda completamente assurda! üòÑ</p>
                            
                            <!-- Game Area -->
                            <div id="triviaGame" class="space-y-4">
                                <!-- Question Card -->
                                <div id="questionCard" class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200 text-center">
                                    <div class="text-sm text-slate-600 mb-2">Domanda <span id="questionNumber">1</span> di 60</div>
                                    <h5 id="questionText" class="text-lg font-medium text-slate-800 mb-4">Clicca "Inizia Quiz" per cominciare!</h5>
                                    <div id="answerOptions" class="space-y-2 hidden">
                                        <!-- Options will be inserted here -->
                                    </div>
                                    <div id="questionResult" class="hidden mt-4 p-3 rounded-lg">
                                        <!-- Result will be shown here -->
                                    </div>
                                </div>
                                
                                <!-- Game Controls -->
                                <div class="flex justify-center space-x-3">
                                    <button id="startBtn" onclick="startTrivia()" 
                                            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                        üéØ Inizia Quiz
                                    </button>
                                    <button id="nextBtn" onclick="nextQuestion()" 
                                            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors hidden">
                                        ‚û°Ô∏è Prossima
                                    </button>
                                </div>
                            </div>
                            

                        </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cassa Comune -->
            <section id="cassa" class="bg-white rounded-lg p-6 shadow-sm section-hidden">
                <h2 class="text-lg font-medium mb-4 text-gray-800 uppercase tracking-wide">üí∞ Cassa Comune</h2>
                <div class="bg-pastel-lavender rounded-lg p-4 space-y-4">
                    <div>
                        <p class="text-sm text-gray-600 mb-4">La cassa comune √® un piccolo tesoro che mettiamo insieme per coprire quelle attivit√† e servizi che non sono inclusi nel pacchetto standard del viaggio. üèùÔ∏è</p>
                        <p class="text-sm text-gray-600 mb-4">Ogni partecipante deve contribuire con la sua parte al coordinatore del viaggio all'inizio del tour, durante il primo incontro di benvenuto, in moneta locale. üíµ</p>
                        <p class="text-sm text-gray-600 mb-4">Per questo tour, l'importo previsto per la cassa comune √® di <strong>250 euro</strong>. Ma attenzione! Questa cifra potrebbe variare, a seconda delle attivit√† che il gruppo decider√† di fare. La cassa comune serve a togliervi dal pensiero di pagare ogni giorno per ogni cosa. Il coordinatore se ne occupa, cos√¨ vi rilassate e godete l'avventura! üòé</p>
                    </div>
                    
                    <div class="bg-white rounded p-3">
                        <h4 class="text-sm font-medium text-gray-800 mb-2">‚úÖ Cosa include la cassa comune:</h4>
                        <ul class="text-xs text-gray-600 space-y-1">
                            <li>üåç Attivit√† extra scelte dal gruppo (biglietti per musei, escursioni, passeggiate turistiche)</li>
                            <li>üõ£Ô∏è Tasse e pedaggi (perch√© ci sono sempre da pagare!)</li>
                            <li>üöó Trasporti locali (salite in tuk tuk, jeep e chi pi√π ne ha pi√π ne metta)</li>
                            <li>üëè Mance generali (per premiare i nostri fantastici autisti e guide)</li>
                            <li>üòâ La quota del coordinatore (s√¨, proprio quella persona che vi far√† divertire e scoprire ogni angolo del paese)</li>
                        </ul>
                    </div>
                    
                    <div class="bg-white rounded p-3">
                        <h4 class="text-sm font-medium text-gray-800 mb-2">‚ùå Cosa NON √® incluso:</h4>
                        <ul class="text-xs text-gray-600 space-y-1">
                            <li>üçïüçú Cibo o pasti, a meno che non si tratti di un men√π fisso. Ognuno ha i suoi gusti, giusto?</li>
                            <li>üë• Quando il gruppo si divide in sottogruppi per attivit√† diverse</li>
                        </ul>
                    </div>
                    
                    <p class="text-sm text-gray-600 italic">Il coordinatore terr√† traccia di tutte le spese fatte con la cassa comune e ogni tanto vi aggiorner√† con un bel riepilogo. Cos√¨ saprete sempre quanto manca prima di arrivare alla fine del viaggio con il sorriso! üòÑ</p>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Perch√© lasciare che il WiFi dello Sri Lanka decida se puoi accedere alle info del viaggio? üì∂üòÖ
                            </p>
                            <p class="text-slate-600 mb-4">
                                Perfetta per quando il telefono √® scarico, la connessione fa i capricci, o semplicemente vuoi fare il figo con la versione cartacea old-school! üìö‚ú®
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                Condividi i tuoi pensieri, emozioni e momenti speciali del viaggio! Ogni messaggio sar√† un ricordo prezioso da rileggere in futuro.
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contatti -->
            <section id="contatti" class="bg-white rounded-lg p-6 shadow-sm section-hidden">
                <h2 class="text-lg font-medium mb-4 text-gray-800 uppercase tracking-wide">Info Utili & Contatti</h2>
                <div class="space-y-4">
                    <div class="bg-pastel-coral rounded-lg p-4">
                        <h3 class="font-medium text-gray-800 mb-3">Sabrina - Coordinatrice</h3>
                        <div class="space-y-2 text-sm text-gray-600">
                            <p>üìß <a href="mailto:cocosabrina.wr@gmail.com" class="text-blue-600 hover:text-blue-800 underline">cocosabrina.wr@gmail.com</a></p>
                            <p>üìß <a href="mailto:sabrina_coco@hotmail.it" class="text-blue-600 hover:text-blue-800 underline">sabrina_coco@hotmail.it</a></p>
                            <p>üì± <a href="tel:+393477257071" class="text-blue-600 hover:text-blue-800 underline">+39 3477257071</a></p>
                            <p>üì∏ <a href="https://instagram.com/awild.coco" target="_blank" class="text-blue-600 hover:text-blue-800 underline">@awild.coco</a></p>
                        </div>
                    </div>
                    <div class="bg-soft-teal rounded-lg p-4">
                        <h3 class="font-medium text-gray-800 mb-3">Contatti di Emergenza Sri Lanka</h3>
                        <div class="space-y-2 text-sm text-gray-600">
                            <p>üö® Polizia: <a href="tel:119" class="text-blue-600 hover:text-blue-800 underline font-medium">119</a></p>
                            <p>üöë Ambulanza: <a href="tel:110" class="text-blue-600 hover:text-blue-800 underline font-medium">110</a></p>
                            <p>üöí Vigili del Fuoco: <a href="tel:111" class="text-blue-600 hover:text-blue-800 underline font-medium">111</a></p>
                            <p>üè• Emergenze Turistiche: <a href="tel:1912" class="text-blue-600 hover:text-blue-800 underline font-medium">1912</a></p>
                        </div>
                    </div>
                    <div class="bg-pastel-blue rounded-lg p-4">
                        <h3 class="font-medium text-gray-800 mb-3">Ambasciata Italiana</h3>
                        <div class="space-y-1 text-sm text-gray-600">
                            <p>üìç <a href="https://maps.google.com/?q=55+Jawatte+Road+Colombo+5+Sri+Lanka" target="_blank" class="text-blue-600 hover:text-blue-800 underline">55, Jawatte Road, Colombo 5</a></p>
                            <p>üìû <a href="tel:+94112588388" class="text-blue-600 hover:text-blue-800 underline">+94 11 2588388</a></p>
                            <p>üìß <a href="mailto:ambasciata.colombo@esteri.it" class="text-blue-600 hover:text-blue-800 underline">ambasciata.colombo@esteri.it</a></p>
                        </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>



            <!-- Chi Siamo -->
            <section id="chisiamo" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üôã‚Äç‚ôÄÔ∏è Chi Siamo</h2>
                
                <div class="bg-blue-50 rounded-xl p-6 mb-6 border border-blue-100">
                    <h3 class="font-semibold text-slate-800 mb-3">üë• Il Nostro Gruppo</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                        <div class="bg-white rounded-lg p-3 border border-slate-200">
                            <div class="text-lg font-bold text-slate-800">13</div>
                            <div class="text-xs text-slate-600">Persone</div>
                        </div>
                        <div class="bg-white rounded-lg p-3 border border-slate-200">
                            <div class="text-lg font-bold text-slate-800">5F + 8M</div>
                            <div class="text-xs text-slate-600">Squadra bilanciata</div>
                        </div>
                        <div class="bg-white rounded-lg p-3 border border-slate-200">
                            <div class="text-lg font-bold text-slate-800">30</div>
                            <div class="text-xs text-slate-600">Et√† media</div>
                        </div>
                        <div class="bg-white rounded-lg p-3 border border-slate-200">
                            <div class="text-lg font-bold text-slate-800">‚àû</div>
                            <div class="text-xs text-slate-600">Avventure</div>
                        </div>
                    </div>
                </div>

                <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                    <div class="space-y-4">
                        <div class="bg-white rounded-xl p-4 border border-slate-200">
                            <h4 class="font-medium text-slate-800 mb-3">üë• Conosciamoci meglio</h4>
                            <div class="space-y-3 text-sm text-slate-600">
                                <div class="border-l-4 border-blue-300 pl-3">
                                    <strong class="text-slate-800">üèñÔ∏è Alessia B (27) - Venezia</strong><br>
                                    La prima a rompere il ghiaccio! Sportiva e sicuramente ottima compagna di viaggio. Probabilmente quella che ci far√† alzare all'alba per vedere l'alba perfetta.
                                </div>
                                
                                <div class="border-l-4 border-emerald-300 pl-3">
                                    <strong class="text-slate-800">‚úàÔ∏è Alessia A (29) - Provincia di Milano</strong><br>
                                    Viaggiatrice incallita e pure sportiva. Non ama fare la valigia ma ama partire. Speriamo non dimentichi nulla di importante!
                                </div>
                                
                                <div class="border-l-4 border-amber-300 pl-3">
                                    <strong class="text-slate-800">üêò Giacomo (26)</strong><br>
                                    Amante della natura e degli animali, sportivo. Con grandi aspettative che ci impegneremo per non deludere!
                                </div>
                                
                                <div class="border-l-4 border-violet-300 pl-3">
                                    <strong class="text-slate-800">üí∞ Martina (28) - Ivrea</strong><br>
                                    Consulente finanziario a cui chiederemo come investire i soldi anche se non vuole. Amante degli animali e dello sport, per cui la aspettiamo in prima fila nelle escursioni.
                                </div>
                                
                                <div class="border-l-4 border-teal-300 pl-3">
                                    <strong class="text-slate-800">ü©∫ Noemi (31) - Zone di Trapani</strong><br>
                                    Medico, non vuole lavorare in viaggio (e ce lo auguriamo tutti). Conta di mangiare nonostante i problemi con la cipolla. Vedremo!
                                </div>
                                
                                <div class="border-l-4 border-red-300 pl-3">
                                    <strong class="text-slate-800">‚è∞ Salvatore (33) - Catania</strong><br>
                                    Si presenta come ritardatario del gruppo, ma noi speriamo si sbagli. Di Catania, come la coordi, quindi sicuramente simpatico. Gastroenterologo che come la Noemi non vuole lavorare in viaggio, e anche qui ce lo auguriamo.
                                </div>
                                
                                <div class="border-l-4 border-indigo-300 pl-3">
                                    <strong class="text-slate-800">ü™® Nicol√≤ (30)</strong><br>
                                    Geologo che ruber√† ogni tipo di pietra che trover√† sul suo cammino. Amante della natura e degli animali, altrimenti non sarebbe qua! Ci ha tradito con un altro operator ma noi lo abbiamo accettato lo stesso.
                                </div>
                                
                                <div class="border-l-4 border-pink-300 pl-3">
                                    <strong class="text-slate-800">üó£Ô∏è Marco (32) - Roma</strong><br>
                                    Mezzo inglese. Direttore di filiale, un altro a cui chiederemo come fare soldi. Tra l'altro parla tanto: √® una win-win situation.
                                </div>
                                
                                <div class="border-l-4 border-orange-300 pl-3">
                                    <strong class="text-slate-800">üíÉ Marlen (30) - Brescia</strong><br>
                                    Abita a Brescia ma di origine dominicana. Anche lei super sportiva, amante della natura, della montagna. Mangia e balla contemporaneamente e aspettiamo che ci faccia vedere come gi√† dalla prima sera.
                                </div>
                                
                                <div class="border-l-4 border-cyan-300 pl-3">
                                    <strong class="text-slate-800">ü§î Matteo (31)</strong><br>
                                    Si √® aggiunto last minute come tanti ed √® stato sommerso da sticker di benvenuto. Il classico "ma cosa ho fatto?" del post-prenotazione. Benvenuto nel gruppo!
                                </div>
                                
                                <div class="border-l-4 border-lime-300 pl-3">
                                    <strong class="text-slate-800">üö¥‚Äç‚ôÇÔ∏è Dario (30) - Bari</strong><br>
                                    Viene da Bari ma va in bicicletta a San Francisco nel tempo libero. Ingegnere architetto, ma pensa sempre a partire. Noi non lo biasimiamo.
                                </div>
                                
                                <div class="border-l-4 border-purple-300 pl-3">
                                    <strong class="text-slate-800">‚öΩ Francesco (31) - Bari</strong><br>
                                    Ex calciatore che ama il buon cibo e il vino. Probabilmente quello che ci insegner√† i trucchi per mangiare curry piccante senza lacrimare.
                                </div>
                                
                                <div class="border-l-4 border-rose-300 pl-3">
                                    <strong class="text-slate-800">üí™ Giulio (31)</strong><br>
                                    Dalla foto si direbbe che abbiamo un altro sportivo e che non sar√† di certo tra quelli che avranno problemi nelle escursioni. Bene cos√¨!
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200">
                            <div class="border-l-4 border-purple-400 pl-3 text-sm text-slate-600">
                                <strong class="text-slate-800">Sabrina (32) - Milano/Catania (Coordinatrice)</strong><br>
                                In ferie dalle frodi, pronta a fare foto a chiunque e qualunque cosa. Pronta anche a tormentare il gruppo con levatacce all'alba e info di ogni tipo.
                            </div>
                        </div>
                    </div>
                </div>


            </section>

            <!-- Preferenze Cibo -->
            <section id="alimentari" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üçΩÔ∏è Preferenze Cibo</h2>
                
                <div class="bg-amber-50 rounded-xl p-6 mb-6 border border-amber-100">
                    <h3 class="font-semibold text-slate-800 mb-3">üìù Comunica le tue esigenze alimentari</h3>
                    
                    <div class="bg-white rounded-xl p-2 md:p-4 border border-amber-200">
                        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScgiBdKXEHsksA3bmvRaT4oHxT829XlyjG6SO9Q5hrLTr4Ogg/viewform?embedded=true" 
                                width="100%" 
                                height="500" 
                                frameborder="0" 
                                marginheight="0" 
                                marginwidth="0"
                                class="rounded-lg w-full min-h-[400px] md:min-h-[500px]"
                                style="max-width: 100%; overflow: hidden;">
                            Caricamento‚Ä¶
                        </iframe>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Perch√© lasciare che il WiFi dello Sri Lanka decida se puoi accedere alle info del viaggio? üì∂üòÖ
                            </p>
                            <p class="text-slate-600 mb-4">
                                Perfetta per quando il telefono √® scarico, la connessione fa i capricci, o semplicemente vuoi fare il figo con la versione cartacea old-school! üìö‚ú®
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                Condividi i tuoi pensieri, emozioni e momenti speciali del viaggio! Ogni messaggio sar√† un ricordo prezioso da rileggere in futuro.
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            </section>

            <!-- App Utili -->
            <section id="app" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üì± App Utili & Strumenti Online</h2>
                
                <div class="space-y-6">
                    <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üó∫Ô∏è Mappe & Navigazione</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üì± App</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Maps.me</strong> - Mappe offline dettagliate<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/maps-me/id510623322" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.mapswithme.maps.pro" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Google Maps</strong> - Scarica le mappe offline dello Sri Lanka<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/google-maps/id585027354" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.maps" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Citymapper</strong> - Per le citt√† principali<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/citymapper/id469463298" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.citymapper.app.release" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê Online</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Google Maps Web</strong><br>
                                        <span class="text-xs">
                                            <a href="https://maps.google.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">maps.google.com</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">OpenStreetMap</strong><br>
                                        <span class="text-xs">
                                            <a href="https://openstreetmap.org" target="_blank" class="text-blue-600 hover:text-blue-800 underline">openstreetmap.org</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Wikimapia</strong><br>
                                        <span class="text-xs">
                                            <a href="https://wikimapia.org" target="_blank" class="text-blue-600 hover:text-blue-800 underline">wikimapia.org</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-emerald-50 rounded-xl p-6 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üó£Ô∏è Traduzione & Comunicazione</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üì± App</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Google Translate</strong> - Traduzione offline Sinhala/Tamil<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/google-translate/id414706506" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.translate" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">iTranslate</strong> - Alternativa con pronuncia<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/itranslate-translator/id288113403" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=at.nk.tools.iTranslate" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">SayHi</strong> - Traduttore vocale<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/sayhi-translate/id437818260" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.sayhi.translate" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê Online</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Google Translate Web</strong><br>
                                        <span class="text-xs">
                                            <a href="https://translate.google.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">translate.google.com</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">DeepL</strong><br>
                                        <span class="text-xs">
                                            <a href="https://deepl.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">deepl.com</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Reverso</strong><br>
                                        <span class="text-xs">
                                            <a href="https://reverso.net" target="_blank" class="text-blue-600 hover:text-blue-800 underline">reverso.net</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-amber-50 rounded-xl p-6 border border-amber-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üí± Valuta & Finanze</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üì± App</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">XE Currency</strong> - Convertitore offline<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/xe-currency/id315241195" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.xe.currency" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Currency Converter Plus</strong> - Semplice e veloce<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/currency-converter-plus-free/id370033717" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.currencyconverterplus.app" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Revolut</strong> / <strong class="text-slate-800">Wise</strong> - Per pagamenti senza commissioni<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/revolut/id932493382" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Revolut iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.revolut.revolut" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Revolut Android</a><br>
                                            <a href="https://apps.apple.com/app/wise-ex-transferwise/id612261027" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Wise iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.transferwise.android" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Wise Android</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê Online</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">XE.com</strong><br>
                                        <span class="text-xs">
                                            <a href="https://xe.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Tassi di cambio in tempo reale</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">OANDA</strong><br>
                                        <span class="text-xs">
                                            <a href="https://oanda.com/currency" target="_blank" class="text-blue-600 hover:text-blue-800 underline">oanda.com/currency</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Google</strong><br>
                                        <span class="text-xs">
                                            <a href="https://google.com/search?q=EUR+to+LKR" target="_blank" class="text-blue-600 hover:text-blue-800 underline">"EUR to LKR" nella ricerca</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-violet-50 rounded-xl p-6 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üå§Ô∏è Meteo & Trasporti</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üì± App</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Weather Underground</strong> - Previsioni locali accurate<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/weather-underground/id486154808" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.wunderground.android.weather" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">PickMe</strong> - Uber locale dello Sri Lanka<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/pickme/id1049278781" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=lk.pickme.passenger" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Uber</strong> - Disponibile nelle citt√† principali<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/uber/id368677368" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.ubercab" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê Online</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Weather.com</strong><br>
                                        <span class="text-xs">
                                            <a href="https://weather.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">weather.com</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">AccuWeather</strong><br>
                                        <span class="text-xs">
                                            <a href="https://accuweather.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">accuweather.com</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Windy</strong><br>
                                        <span class="text-xs">
                                            <a href="https://windy.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">windy.com</a> (per le piogge)
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-teal-50 rounded-xl p-6 border border-teal-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üì∏ Foto & Utilit√†</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üì± App</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Google Photos</strong> - Backup automatico foto<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/google-photos/id962194608" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.photos" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Offline Survival Manual</strong> - Consigli di emergenza<br>
                                        <span class="text-xs">
                                            <a href="https://apps.apple.com/app/offline-survival-manual/id1054579421" target="_blank" class="text-blue-600 hover:text-blue-800 underline">iOS</a> | 
                                            <a href="https://play.google.com/store/apps/details?id=org.ligi.survivalmanual" target="_blank" class="text-blue-600 hover:text-blue-800 underline">Android</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-xl p-4 border border-slate-200">
                                <h4 class="font-medium text-slate-800 mb-2">üåê Online</h4>
                                <ul class="text-sm text-slate-600 space-y-2">
                                    <li>‚Ä¢ <strong class="text-slate-800">Google Photos Web</strong><br>
                                        <span class="text-xs">
                                            <a href="https://photos.google.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">photos.google.com</a>
                                        </span>
                                    </li>
                                    <li>‚Ä¢ <strong class="text-slate-800">Time Zone Converter</strong><br>
                                        <span class="text-xs">
                                            <a href="https://timeanddate.com" target="_blank" class="text-blue-600 hover:text-blue-800 underline">timeanddate.com</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-4">üí° Consigli per l'Uso</h3>
                        <div class="bg-white rounded-xl p-4 border border-slate-200">
                            <ul class="text-sm text-slate-600 space-y-2">
                                <li>‚Ä¢ <strong>Scarica tutto prima di partire</strong> - Il WiFi potrebbe essere lento</li>
                                <li>‚Ä¢ <strong>Attiva il roaming dati</strong> - O compra una SIM locale all'arrivo</li>
                                <li>‚Ä¢ <strong>Porta un power bank</strong> - Le app consumano batteria</li>
                                <li>‚Ä¢ <strong>Salva i numeri importanti</strong> - Anche offline nel telefono</li>
                                <li>‚Ä¢ <strong>Screenshot delle mappe</strong> - Come backup delle app offline</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Foto -->
            <section id="foto" class="bg-white rounded-xl p-8 shadow-sm border border-slate-200 section-hidden">
                <h2 class="text-xl font-semibold mb-6 text-slate-800 uppercase tracking-wider">üì∏ Galleria Foto</h2>
                
                <!-- Album per Giorni -->
                <div>
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">üìÖ Album per Giorni</h3>
                    <div class="space-y-4">
                    <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-3">‚úàÔ∏è Giorno 1 - Arrivo a Negombo</h3>
                        <a href="https://photos.google.com/u/0/album/AF1QipNvx6MMJ-buVXYJdZcfT0449p5KX9pNbctJecfy?hl=it" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-800 hover:bg-slate-50 transition-colors border border-slate-200 shadow-sm text-sm">
                            üì∑ Visualizza Album Giorno 1
                        </a>
                    </div>
                    
                    <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üè∞ Giorno 2 - Galle</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-amber-50 rounded-xl p-4 border border-amber-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üêò Giorno 3 - Udawalawe National Park</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-violet-50 rounded-xl p-4 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üöÇ Giorno 4 - Ella</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-teal-50 rounded-xl p-4 border border-teal-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üçÉ Giorno 5 - Distretto di Nuwara Eliya</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üëë Giorno 6 - Kandy</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üèõÔ∏è Giorno 7 - Dambulla</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-amber-50 rounded-xl p-4 border border-amber-100">
                        <h3 class="font-semibold text-slate-800 mb-3">ü¶Å Giorno 8 - Sigiriya e Polonnaruwa</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-violet-50 rounded-xl p-4 border border-violet-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üèñÔ∏è Giorno 9 - Trincomalee/Pasikudah</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-teal-50 rounded-xl p-4 border border-teal-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üèñÔ∏è Giorno 10 - Trincomalee/Pasikudah</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                        <h3 class="font-semibold text-slate-800 mb-3">üèõÔ∏è Giorno 11 - Anuradhapura</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>

                    <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-100">
                        <h3 class="font-semibold text-slate-800 mb-3">‚úàÔ∏è Giorno 12 - Negombo/Colombo - Partenza</h3>
                        <a href="#" 
                           target="_blank" 
                           class="inline-block bg-white px-4 py-2 rounded-lg font-medium text-slate-600 border border-slate-200 shadow-sm text-sm cursor-not-allowed opacity-50">
                            üì∑ Album in arrivo...
                        </a>
                    </div>
                    </div>
                </div>

                <!-- Diario Section -->
                <div id="fun-diario" class="fun-content hidden">
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                        <h3 class="font-semibold text-slate-800 mb-4">üìñ Mini Diario di Bordo</h3>
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mb-6">
                            <p class="text-slate-600 mb-4">
                                Il posto dove immortalare i momenti epici, i fail memorabili e le rivelazioni esistenziali che vi colpiranno tra un curry e l'altro! üå∂Ô∏èüí≠
                            </p>
                            <p class="text-slate-600 mb-4">
                                Che sia "Ho appena visto il tramonto pi√π bello della mia vita" o "Aiuto, ho mangiato qualcosa che mi ha fatto vedere gli elefanti rosa", questo √® il vostro spazio per condividere tutto quello che vi passa per la testa! 
                            </p>
                            <p class="text-sm text-slate-500 italic">
                                üí° Modalit√† ninja attivata: puoi scrivere in anonimo se hai fatto qualcosa di imbarazzante ma troppo divertente per non condividerlo! ü•∑
                            </p>
                        </div>
                        
                        <!-- Entries Display -->
                        <div id="diaryEntriesContainer" class="space-y-4 mb-6">
                            <!-- Le entries verranno aggiunte qui dinamicamente -->
                        </div>
                        
                        <!-- Add New Entry Form -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200">
                            <h4 class="font-medium text-slate-800 mb-4">‚úçÔ∏è Scrivi nel Diario</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo messaggio</label>
                                    <textarea id="diaryMessage" placeholder="Racconta questo momento del viaggio..." rows="4"
                                              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Il tuo nome</label>
                                        <input type="text" id="diaryAuthor" placeholder="Il tuo nome (opzionale - lascia vuoto per essere anonimo)" 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Dove siamo? (opzionale)</label>
                                        <input type="text" id="diaryLocation" placeholder="es. Galle Fort, Ella..." 
                                               class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm">
                                    </div>
                                </div>
                                <button onclick="addDiaryEntry()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìù Aggiungi al Diario
                                </button>
                            </div>
                        </div>
                        
                        <!-- Export Diary -->
                        <div class="bg-white rounded-xl p-4 border border-orange-200 mt-4">
                            <h4 class="font-medium text-slate-800 mb-2">üì§ Esporta Diario</h4>
                            <p class="text-sm text-slate-600 mb-3">Salva tutti i ricordi del gruppo in un unico documento!</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                <button onclick="exportDiary()" 
                                        class="bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üíæ Scarica TXT
                                </button>
                                <button onclick="exportDiaryPDF()" 
                                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
                                    üìÑ Scarica PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


        </div>
    </main>

    <!-- Mappa -->
    <section class="py-8 px-4">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-lg font-medium mb-4 text-gray-800 text-center uppercase tracking-wide">Mappa del Viaggio</h2>
            <div class="bg-white rounded-lg p-4 shadow-sm">
                <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1gTAOUDlDBBOvcOWS6WreyDT61NXHbHs&ehbc=2E312F&noprof=1" 
                        width="100%" 
                        height="400" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade"
                        class="rounded-lg">
                </iframe>
            </div>
        </div>
    </section>

    <!-- Link Utili -->
    <section class="py-6 px-4">
        <div class="max-w-3xl mx-auto">
            <h2 class="text-lg font-medium mb-3 text-gray-800 text-center uppercase tracking-wide">LINK UTILI</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <a href="https://www.weroad.it/viaggi/viaggio-sri-lanka-estate" target="_blank" 
                   class="bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow border border-gray-200 text-center">
                    <div class="text-lg mb-1">üåç</div>
                    <div class="text-xs font-medium text-gray-800 uppercase">WEROAD</div>
                </a>
                
                <a href="https://www.viaggiaresicuri.it/country/LKA" target="_blank" 
                   class="bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow border border-gray-200 text-center">
                    <div class="text-lg mb-1">üõ°Ô∏è</div>
                    <div class="text-xs font-medium text-gray-800 uppercase">SICUREZZA</div>
                </a>
                
                <a href="https://www.eta.gov.lk/slvisa/" target="_blank" 
                   class="bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow border border-gray-200 text-center">
                    <div class="text-lg mb-1">üìã</div>
                    <div class="text-xs font-medium text-gray-800 uppercase">VISTO ETA</div>
                </a>
                
                <a href="https://ambcolombo.esteri.it/it/" target="_blank" 
                   class="bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow border border-gray-200 text-center">
                    <div class="text-lg mb-1">üáÆüáπ</div>
                    <div class="text-xs font-medium text-gray-800 uppercase">AMBASCIATA</div>
                </a>
            </div>
        </div>
    </section>



    <script>
        // Countdown Timer
        function updateCountdown() {
            const targetDate = new Date('2025-08-18T00:00:00').getTime();
            const now = new Date().getTime();
            const difference = targetDate - now;

            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Modal Functions
        function openModal(sectionId) {
            const modal = document.getElementById('contentModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            // Get the section content
            const section = document.getElementById(sectionId);
            const sectionTitle = section.querySelector('h2').textContent;
            const sectionContent = section.innerHTML;
            
            // Create a temporary div to manipulate the content
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = sectionContent;
            
            // Remove the h2 title from the content since it's already in the modal header
            const h2Element = tempDiv.querySelector('h2');
            if (h2Element) {
                h2Element.remove();
            }
            
            // Set modal content
            modalTitle.textContent = sectionTitle;
            modalContent.innerHTML = tempDiv.innerHTML;
            
            // Show modal
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeModal() {
            const modal = document.getElementById('contentModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('contentModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
                closeInternetModal();
            }
        });

        // Internet Solutions Modal Functions
        function openInternetSolutionsModal() {
            const modal = document.getElementById('internetModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeInternetModal() {
            const modal = document.getElementById('internetModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Close internet modal when clicking outside
        window.onclick = function(event) {
            const contentModal = document.getElementById('contentModal');
            const internetModal = document.getElementById('internetModal');
            if (event.target === contentModal) {
                closeModal();
            }
            if (event.target === internetModal) {
                closeInternetModal();
            }
        }

        // Fun Zone Tab Navigation
        function showFunSection(section) {
            // Hide all content sections
            const contents = document.querySelectorAll('.fun-content');
            contents.forEach(content => content.classList.add('hidden'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.fun-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active', 'bg-blue-600', 'text-white');
                tab.classList.add('bg-slate-200', 'text-slate-700', 'hover:bg-slate-300');
            });
            
            // Show selected content
            document.getElementById(`fun-${section}`).classList.remove('hidden');
            
            // Activate selected tab
            const activeTab = document.getElementById(`tab-${section}`);
            activeTab.classList.remove('bg-slate-200', 'text-slate-700', 'hover:bg-slate-300');
            activeTab.classList.add('active', 'bg-blue-600', 'text-white');
        }





        // Sri Lanka Trivia Game
        const triviaQuestions = [
            {
                question: "Qual √® la capitale dello Sri Lanka?",
                options: ["Colombo", "Sri Jayawardenepura Kotte", "Kandy", "Galle"],
                correct: 1,
                explanation: "Sri Jayawardenepura Kotte √® la capitale amministrativa, mentre Colombo √® la capitale commerciale!"
            },
            {
                question: "Come si chiama il famoso t√® dello Sri Lanka?",
                options: ["Earl Grey", "Ceylon", "Darjeeling", "Assam"],
                correct: 1,
                explanation: "Il t√® Ceylon prende il nome dall'antico nome dello Sri Lanka!"
            },
            {
                question: "Quale animale √® considerato sacro nello Sri Lanka?",
                options: ["Tigre", "Elefante", "Leone", "Cobra"],
                correct: 1,
                explanation: "Gli elefanti sono considerati sacri e sono un simbolo nazionale!"
            },
            {
                question: "Qual √® il piatto nazionale dello Sri Lanka?",
                options: ["Kottu Roti", "Hoppers", "Rice and Curry", "Fish Curry"],
                correct: 2,
                explanation: "Rice and Curry √® il piatto base consumato quotidianamente!"
            },
            {
                question: "Quanti anni ha la Roccia di Sigiriya?",
                options: ["500 anni", "1000 anni", "1500 anni", "2000 anni"],
                correct: 2,
                explanation: "La fortezza di Sigiriya fu costruita nel V secolo d.C.!"
            },
            {
                question: "Quale spezia NON cresce naturalmente in Sri Lanka?",
                options: ["Cannella", "Cardamomo", "Pepe nero", "Zafferano"],
                correct: 3,
                explanation: "Lo zafferano cresce principalmente in Kashmir e Iran!"
            },
            {
                question: "Come si dice 'Ciao' in Sinhala?",
                options: ["Namaste", "Ayubowan", "Vanakkam", "Salam"],
                correct: 1,
                explanation: "Ayubowan significa letteralmente 'che tu possa vivere a lungo'!"
            },
            {
                question: "Quale frutto √® considerato il 'Re dei frutti' in Sri Lanka?",
                options: ["Mango", "Durian", "Jackfruit", "Rambutan"],
                correct: 1,
                explanation: "Il Durian √® famoso per il suo odore forte ma il sapore delizioso!"
            },
            {
                question: "Quante province ha lo Sri Lanka?",
                options: ["7", "8", "9", "10"],
                correct: 2,
                explanation: "Lo Sri Lanka √® diviso in 9 province!"
            },
            {
                question: "Quale religione √® praticata dalla maggioranza della popolazione?",
                options: ["Induismo", "Islam", "Buddhismo", "Cristianesimo"],
                correct: 2,
                explanation: "Circa il 70% della popolazione √® buddhista!"
            },
            {
                question: "Qual √® l'animale nazionale dello Sri Lanka?",
                options: ["Elefante", "Leone", "Leopardo", "Pavone"],
                correct: 1,
                explanation: "Il leone √® rappresentato sulla bandiera nazionale!"
            },
            {
                question: "Come si chiamano le tradizionali 'crepe' dello Sri Lanka?",
                options: ["Dosa", "Hoppers", "Roti", "Appam"],
                correct: 1,
                explanation: "Gli Hoppers sono fatti con latte di cocco fermentato!"
            },
            {
                question: "Quale citt√† √® famosa per la sua fortezza coloniale?",
                options: ["Kandy", "Galle", "Anuradhapura", "Polonnaruwa"],
                correct: 1,
                explanation: "Il forte di Galle √® patrimonio UNESCO costruito dai portoghesi!"
            },
            {
                question: "Quanti denti ha un elefante adulto?",
                options: ["24", "26", "28", "30"],
                correct: 1,
                explanation: "Gli elefanti hanno 26 denti che si rinnovano durante la vita!"
            },
            {
                question: "Quale treno √® famoso per i suoi panorami?",
                options: ["Colombo-Kandy", "Ella-Nuwara Eliya", "Kandy-Ella", "Galle-Colombo"],
                correct: 2,
                explanation: "Il treno da Kandy a Ella attraversa le piantagioni di t√®!"
            },
            {
                question: "Cosa fanno gli elefanti quando sono tristi?",
                options: ["Piangono lacrime viola", "Mangiano gelato", "Fanno yoga", "Chiamano la mamma"],
                correct: 0,
                explanation: "Ovviamente √® una domanda inventata! Gli elefanti non piangono lacrime viola! üòÑ"
            },
            {
                question: "Quale cascata √® la pi√π alta dello Sri Lanka?",
                options: ["Diyaluma Falls", "Bambarakanda Falls", "Sekumpura Falls", "Devon Falls"],
                correct: 1,
                explanation: "Bambarakanda Falls √® alta 263 metri!"
            },
            {
                question: "Qual √® il passatempo preferito dei tuk-tuk?",
                options: ["Giocare a scacchi", "Fare karaoke", "Suonare il clacson", "Ballare salsa"],
                correct: 2,
                explanation: "I tuk-tuk amano suonare il clacson... sempre! üé∫"
            },
            {
                question: "Quale parco nazionale √® famoso per gli elefanti?",
                options: ["Yala", "Udawalawe", "Minneriya", "Tutti e tre"],
                correct: 3,
                explanation: "Tutti e tre i parchi sono famosi per gli elefanti!"
            },
            {
                question: "Come si chiama il latte di cocco in cucina singalese?",
                options: ["Kiri", "Pol Kiri", "Thambili", "Kurumba"],
                correct: 1,
                explanation: "Pol Kiri significa letteralmente 'latte di cocco'!"
            },
            {
                question: "Cosa succede se mangi troppo curry piccante?",
                options: ["Diventi rosso come un granchio", "Inizi a parlare Tamil", "Vedi gli elefanti rosa", "Diventi immune alle zanzare"],
                correct: 0,
                explanation: "Diventi rosso come un granchio e cerchi disperatamente del latte! ü¶Ä"
            },
            {
                question: "Quale gemma √® famosa in Sri Lanka?",
                options: ["Diamante", "Rubino", "Zaffiro", "Smeraldo"],
                correct: 2,
                explanation: "Lo Sri Lanka √® famoso per i suoi zaffiri blu!"
            },
            {
                question: "Quante lingue ufficiali ha lo Sri Lanka?",
                options: ["1", "2", "3", "4"],
                correct: 2,
                explanation: "Sinhala, Tamil e Inglese sono le lingue ufficiali!"
            },
            {
                question: "Perch√© i cocchi crescono sulle palme?",
                options: ["Per fare ginnastica", "Per evitare i granchi", "Per vedere il mare", "Per non bagnarsi"],
                correct: 1,
                explanation: "Per evitare i granchi che ruberebbero tutti i cocchi! ü¶Äü••"
            },
            {
                question: "Quale festival √® il pi√π importante per i buddhisti?",
                options: ["Vesak", "Poson", "Esala Perahera", "Diwali"],
                correct: 0,
                explanation: "Vesak celebra la nascita, illuminazione e morte del Buddha!"
            },
            {
                question: "Come si chiama il riso rosso tipico dello Sri Lanka?",
                options: ["Basmati", "Jasmine", "Red Rice", "Samba"],
                correct: 3,
                explanation: "Il riso Samba √® una variet√† locale molto nutriente!"
            },
            {
                question: "Cosa fanno i pesci quando piove?",
                options: ["Aprono l'ombrello", "Vanno a casa", "Nuotano pi√π veloce", "Fanno la doccia gratis"],
                correct: 3,
                explanation: "Fanno la doccia gratis, ovviamente! üêü‚òî"
            },
            {
                question: "Quale citt√† √® chiamata 'Citt√† delle Gemme'?",
                options: ["Ratnapura", "Kandy", "Galle", "Colombo"],
                correct: 0,
                explanation: "Ratnapura significa letteralmente 'citt√† delle gemme'!"
            },
            {
                question: "Quanti parchi nazionali ci sono in Sri Lanka?",
                options: ["22", "24", "26", "28"],
                correct: 2,
                explanation: "Lo Sri Lanka ha 26 parchi nazionali!"
            },
            {
                question: "Qual √® il superpotere segreto delle zanzare dello Sri Lanka?",
                options: ["Invisibilit√†", "Teletrasporto", "Resistenza al repellente", "Karaoke notturno"],
                correct: 3,
                explanation: "Fanno karaoke tutta la notte nelle orecchie! ü¶üüé§"
            },
            {
                question: "Quale oceano bagna lo Sri Lanka?",
                options: ["Oceano Atlantico", "Oceano Pacifico", "Oceano Indiano", "Mare Arabico"],
                correct: 2,
                explanation: "Lo Sri Lanka √® un'isola nell'Oceano Indiano!"
            },
            {
                question: "Come si chiama l'antica capitale di Anuradhapura?",
                options: ["Anuradhapura", "Anuradha", "Anura", "Dhapura"],
                correct: 0,
                explanation: "Anuradhapura prende il nome dal re Anuradha!"
            },
            {
                question: "Quale sport √® pi√π popolare in Sri Lanka?",
                options: ["Calcio", "Cricket", "Rugby", "Tennis"],
                correct: 1,
                explanation: "Il cricket √® lo sport nazionale e pi√π seguito!"
            },
            {
                question: "Quante ore di volo ci vogliono dall'Italia?",
                options: ["6-8 ore", "8-10 ore", "10-12 ore", "12-14 ore"],
                correct: 2,
                explanation: "Circa 10-12 ore con uno scalo, solitamente a Dubai o Doha!"
            },
            {
                question: "Quale valuta si usa in Sri Lanka?",
                options: ["Dollaro", "Euro", "Rupia dello Sri Lanka", "Yen"],
                correct: 2,
                explanation: "La valuta locale √® la Rupia dello Sri Lanka (LKR)!"
            },
            {
                question: "Come si chiama il famoso albero sacro di Anuradhapura?",
                options: ["Banyan Tree", "Sri Maha Bodhi", "Coconut Tree", "Tea Tree"],
                correct: 1,
                explanation: "Il Sri Maha Bodhi √® considerato l'albero pi√π antico del mondo!"
            },
            {
                question: "Quale percentuale del territorio √® coperta da foreste?",
                options: ["20%", "30%", "40%", "50%"],
                correct: 1,
                explanation: "Circa il 30% del territorio √® coperto da foreste!"
            },
            {
                question: "Come si chiama il tradizionale vestito femminile?",
                options: ["Sari", "Salwar", "Osariya", "Lehenga"],
                correct: 2,
                explanation: "L'Osariya √® il tradizionale sari dello Sri Lanka!"
            },
            {
                question: "Quale spezia √® originaria dello Sri Lanka?",
                options: ["Pepe", "Zenzero", "Cannella", "Curcuma"],
                correct: 2,
                explanation: "La cannella di Ceylon √® considerata la migliore al mondo!"
            },
            {
                question: "Quanti UNESCO World Heritage Sites ha lo Sri Lanka?",
                options: ["6", "7", "8", "9"],
                correct: 2,
                explanation: "Lo Sri Lanka ha 8 siti patrimonio dell'umanit√† UNESCO!"
            },
            {
                question: "Come si chiama il dolce tradizionale fatto con latte di cocco?",
                options: ["Kiribath", "Kokis", "Aluwa", "Watalappan"],
                correct: 3,
                explanation: "Il Watalappan √® un budino speziato molto popolare!"
            },
            {
                question: "Quale animale √® il simbolo del partito politico principale?",
                options: ["Elefante", "Leone", "Tigre", "Cobra"],
                correct: 0,
                explanation: "L'elefante √® il simbolo dell'United National Party!"
            },
            {
                question: "Come si chiama il vento monsonico che porta le piogge?",
                options: ["Yala", "Maha", "Kala", "Poya"],
                correct: 1,
                explanation: "Il monsone Maha porta le piogge da ottobre a gennaio!"
            },
            {
                question: "Quale fiore √® il simbolo nazionale?",
                options: ["Loto blu", "Orchidea", "Frangipani", "Ibisco"],
                correct: 0,
                explanation: "Il loto blu (Nil Manel) √® il fiore nazionale!"
            },
            {
                question: "Come si chiama la danza tradizionale dello Sri Lanka?",
                options: ["Bharatanatyam", "Kandyan", "Kathak", "Odissi"],
                correct: 1,
                explanation: "La danza Kandyan √® la danza tradizionale pi√π famosa!"
            },
            {
                question: "Quale pesce √® pi√π comune nei curry?",
                options: ["Salmone", "Tonno", "Sgombro", "Merluzzo"],
                correct: 1,
                explanation: "Il tonno √® molto comune nei curry di pesce!"
            },
            {
                question: "Come si chiama il mercato galleggiante di Colombo?",
                options: ["Pettah Market", "Floating Market", "Galle Face", "Dutch Hospital"],
                correct: 1,
                explanation: "Il Floating Market √® un'attrazione turistica moderna!"
            },
            {
                question: "Quale temperatura media c'√® ad agosto?",
                options: ["20-25¬∞C", "25-30¬∞C", "30-35¬∞C", "35-40¬∞C"],
                correct: 1,
                explanation: "Ad agosto le temperature sono tra 25-30¬∞C!"
            },
            {
                question: "Come si chiama il famoso hotel a forma di nave a Colombo?",
                options: ["Galle Face Hotel", "Cinnamon Grand", "Kingsbury", "Shangri-La"],
                correct: 0,
                explanation: "Il Galle Face Hotel √® un hotel storico sul lungomare!"
            },
            {
                question: "Quale attivit√† √® vietata durante il Poya Day?",
                options: ["Mangiare carne", "Vendere alcol", "Guidare", "Nuotare"],
                correct: 1,
                explanation: "Durante i giorni di luna piena (Poya) √® vietata la vendita di alcol!"
            },
            {
                question: "Come si chiama il famoso ponte di Ella?",
                options: ["Nine Arch Bridge", "Seven Arch Bridge", "Stone Bridge", "Railway Bridge"],
                correct: 0,
                explanation: "Il Nine Arch Bridge √® una delle attrazioni pi√π fotografate!"
            },
            {
                question: "Quale frutto ha la forma di una stella?",
                options: ["Star Apple", "Star Fruit", "Dragon Fruit", "Passion Fruit"],
                correct: 1,
                explanation: "Lo Star Fruit (Carambola) ha la caratteristica forma a stella!"
            },
            {
                question: "Come si chiama il tradizionale strumento musicale?",
                options: ["Tabla", "Sitar", "Geta Beraya", "Veena"],
                correct: 2,
                explanation: "Il Geta Beraya √® un tamburo tradizionale singalese!"
            },
            {
                question: "Quale colore predomina nella bandiera dello Sri Lanka?",
                options: ["Rosso", "Verde", "Arancione", "Blu"],
                correct: 2,
                explanation: "L'arancione (zafferano) √® il colore predominante della bandiera!"
            },
            {
                question: "Come si chiama il famoso faro di Galle?",
                options: ["Galle Lighthouse", "Dutch Lighthouse", "Flag Rock", "Rampart Lighthouse"],
                correct: 0,
                explanation: "Il Galle Lighthouse √® il faro pi√π antico dello Sri Lanka!"
            },
            {
                question: "Quale insetto √® considerato portafortuna?",
                options: ["Farfalla", "Libellula", "Coccinella", "Grillo"],
                correct: 1,
                explanation: "Le libellule sono considerate portafortuna nella cultura locale!"
            },
            {
                question: "Come si chiama il dolce fritto a forma di fiore?",
                options: ["Kokis", "Aluwa", "Kiribath", "Aggala"],
                correct: 0,
                explanation: "I Kokis sono dolci fritti tradizionali a forma di fiore!"
            },
            {
                question: "Quale uccello √® il simbolo nazionale?",
                options: ["Pavone", "Pappagallo", "Gallo di Ceylon", "Airone"],
                correct: 2,
                explanation: "Il Gallo di Ceylon (Sri Lanka Junglefowl) √® l'uccello nazionale!"
            },
            {
                question: "Come si chiama il famoso giardino botanico?",
                options: ["Peradeniya", "Hakgala", "Henarathgoda", "Gampaha"],
                correct: 0,
                explanation: "I Royal Botanic Gardens di Peradeniya sono i pi√π famosi!"
            },
            {
                question: "Quale mare bagna la costa occidentale?",
                options: ["Mare Arabico", "Golfo del Bengala", "Mare delle Andamane", "Stretto di Palk"],
                correct: 0,
                explanation: "La costa occidentale √® bagnata dal Mare Arabico!"
            },
            {
                question: "Come si chiama il tradizionale gioco con le noci di cocco?",
                options: ["Coconut Breaking", "Pol Keli", "Kotta Pora", "Gaha Keli"],
                correct: 1,
                explanation: "Pol Keli √® un tradizionale gioco con le noci di cocco!"
            }
        ];

        let currentQuestionIndex = 0;
        let gameStarted = false;
        let questionAnswered = false;

        function startTrivia() {
            gameStarted = true;
            currentQuestionIndex = 0;
            questionAnswered = false;
            
            document.getElementById('startBtn').classList.add('hidden');
            document.getElementById('nextBtn').classList.remove('hidden');
            
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= triviaQuestions.length) {
                endGame();
                return;
            }

            const question = triviaQuestions[currentQuestionIndex];
            questionAnswered = false;
            
            document.getElementById('questionNumber').textContent = currentQuestionIndex + 1;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('hidden');
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full bg-white hover:bg-blue-50 border border-slate-300 rounded-lg p-3 text-left transition-colors';
                button.textContent = option;
                button.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('questionResult').classList.add('hidden');
            document.getElementById('nextBtn').textContent = currentQuestionIndex === triviaQuestions.length - 1 ? 'üèÅ Fine Quiz' : '‚û°Ô∏è Prossima';
        }

        function selectAnswer(selectedIndex) {
            if (questionAnswered) return;
            
            questionAnswered = true;
            const question = triviaQuestions[currentQuestionIndex];
            const isCorrect = selectedIndex === question.correct;
            
            // Update visual feedback
            const options = document.getElementById('answerOptions').children;
            for (let i = 0; i < options.length; i++) {
                if (i === question.correct) {
                    options[i].className = 'w-full bg-green-100 border border-green-300 rounded-lg p-3 text-left';
                } else if (i === selectedIndex && !isCorrect) {
                    options[i].className = 'w-full bg-red-100 border border-red-300 rounded-lg p-3 text-left';
                } else {
                    options[i].className = 'w-full bg-slate-100 border border-slate-300 rounded-lg p-3 text-left opacity-50';
                }
                options[i].onclick = null; // Disable further clicks
            }
            
            // Show result
            const resultDiv = document.getElementById('questionResult');
            resultDiv.className = `mt-4 p-3 rounded-lg ${isCorrect ? 'bg-green-100 border border-green-300' : 'bg-red-100 border border-red-300'}`;
            resultDiv.innerHTML = `
                <div class="font-medium ${isCorrect ? 'text-green-800' : 'text-red-800'}">
                    ${isCorrect ? '‚úÖ Corretto!' : '‚ùå Sbagliato!'}
                </div>
                <div class="text-sm text-slate-600 mt-1">${question.explanation}</div>
            `;
            resultDiv.classList.remove('hidden');
        }

        function nextQuestion() {
            if (!questionAnswered) {
                alert('Rispondi prima alla domanda!');
                return;
            }
            
            currentQuestionIndex++;
            showQuestion();
        }

        function endGame() {
            document.getElementById('questionText').textContent = 'üéâ Quiz completato!';
            document.getElementById('answerOptions').classList.add('hidden');
            document.getElementById('questionResult').classList.add('hidden');
            document.getElementById('nextBtn').classList.add('hidden');
            document.getElementById('startBtn').classList.remove('hidden');
            document.getElementById('startBtn').textContent = 'üîÑ Ricomincia Quiz';
            
            gameStarted = false;
        }



        function resetRooms() {
            const display = document.getElementById('randomRoomsDisplay');
            display.classList.add('hidden');
            display.innerHTML = '';
            
            // Reset checkboxes
            document.getElementById('allowMixed').checked = false;
            document.getElementById('allowTriple').checked = false;
        }

        // Awards Voting System
        function submitVotes() {
            const voterName = document.getElementById('voterName').value;
            if (!voterName) {
                alert('Per favore seleziona il tuo nome prima di votare!');
                return;
            }

            // Collect all votes
            const votes = {};
            const awardSelects = document.querySelectorAll('.award-select');
            let hasVotes = false;

            awardSelects.forEach(select => {
                const award = select.getAttribute('data-award');
                const vote = select.value;
                if (vote) {
                    votes[award] = vote;
                    hasVotes = true;
                }
            });

            if (!hasVotes) {
                alert('Per favore vota almeno per un award!');
                return;
            }

            // Create email content with votes
            const subject = encodeURIComponent('Voti Awards - Sri Lanka 360¬∞');
            let emailBody = `Ciao Sabrina,

ecco i miei voti per gli Awards del viaggio:

VOTANTE: ${voterName}
DATA: ${new Date().toLocaleDateString('it-IT')} - ${new Date().toLocaleTimeString('it-IT')}

VOTI:
`;

            // Add votes to email body
            const awardNames = {
                'energizer': 'üèÉ‚Äç‚ôÇÔ∏è Energizer Bunny',
                'fotografo': 'üì∏ Fotografo Ufficiale',
                'navigator': 'üó∫Ô∏è Navigator',
                'foodexplorer': 'üçõ Food Explorer',
                'comedian': 'üòÇ Comedian',
                'teamplayer': 'ü§ù Team Player',
                'earlybird': 'üåÖ Early Bird',
                'packingmaster': 'üéí Packing Master',
                'sleepingbeauty': 'üò¥ Sleeping Beauty',
                'slowmotion': 'üêå Slow Motion',
                'overpacker': 'üß≥ Overpacker',
                'socialmedia': 'üì± Social Media Star',
                'philosopher': 'ü§î Philosopher',
                'pickyeater': 'üçï Picky Eater',
                'chatterbox': 'üó£Ô∏è Chatterbox',
                'wrongway': 'üß≠ Wrong Way'
            };

            const playerNames = {
                'alessiab': 'Alessia B',
                'alessiaa': 'Alessia A',
                'giacomo': 'Giacomo',
                'martina': 'Martina',
                'noemi': 'Noemi',
                'salvatore': 'Salvatore',
                'nicolo': 'Nicol√≤',
                'marco': 'Marco',
                'marlen': 'Marlen',
                'matteo': 'Matteo',
                'dario': 'Dario',
                'francesco': 'Francesco',
                'giulio': 'Giulio',
                'sabrina': 'Sabrina'
            };

            Object.keys(votes).forEach(award => {
                const awardName = awardNames[award] || award;
                const playerName = playerNames[votes[award]] || votes[award];
                emailBody += `${awardName}: ${playerName}\n`;
            });

            emailBody += `\nTotale voti espressi: ${Object.keys(votes).length}

Buon divertimento con i risultati! üéâ

${voterName}`;

            const body = encodeURIComponent(emailBody);
            
            // Open email client
            window.location.href = `mailto:cocosabrina.wr@gmail.com?subject=${subject}&body=${body}`;
            
            // Show success message and reset form
            const submitBtn = document.querySelector('button[onclick="submitVotes()"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '‚úÖ Voti inviati!';
            submitBtn.className = 'w-full bg-green-600 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200';
            
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.className = 'w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200';
                
                // Reset all selects
                awardSelects.forEach(select => select.value = '');
                document.getElementById('voterName').value = '';
            }, 3000);
        }

        // Shuffle Groups Data - Pre-defined groups for each day
        const shuffleGroups = {
            1: {
                location: "Negombo - Arrivo",
                emoji: "‚úàÔ∏è",
                groups: [
                    { name: "Gruppo Esploratori", members: ["Alessia B", "Giacomo", "Dario"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Avventurieri", members: ["Martina", "Francesco", "Giulio"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Navigatori", members: ["Noemi", "Marco", "Matteo"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Pionieri", members: ["Alessia A", "Salvatore", "Nicol√≤", "Marlen"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            2: {
                location: "Galle",
                emoji: "üè∞",
                groups: [
                    { name: "Gruppo Storici", members: ["Salvatore", "Matteo", "Alessia B"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Fotografi", members: ["Nicol√≤", "Noemi", "Giulio"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Curiosi", members: ["Marco", "Marlen", "Dario"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Creativi", members: ["Alessia A", "Giacomo", "Francesco", "Martina"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            3: {
                location: "Udawalawe",
                emoji: "üêò",
                groups: [
                    { name: "Gruppo Safari", members: ["Francesco", "Alessia A", "Marco"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Natura", members: ["Marlen", "Giacomo", "Salvatore"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Wildlife", members: ["Giulio", "Alessia B", "Nicol√≤"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Elefanti", members: ["Martina", "Noemi", "Matteo", "Dario"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            4: {
                location: "Ella",
                emoji: "üöÇ",
                groups: [
                    { name: "Gruppo Montanari", members: ["Noemi", "Francesco", "Alessia A"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Trekkers", members: ["Matteo", "Marlen", "Giulio"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Panorama", members: ["Dario", "Martina", "Marco"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Treno", members: ["Giacomo", "Salvatore", "Nicol√≤", "Alessia B"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            5: {
                location: "Nuwara Eliya",
                emoji: "üçÉ",
                groups: [
                    { name: "Gruppo T√®", members: ["Martina", "Giulio", "Alessia A"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Piantagioni", members: ["Dario", "Noemi", "Francesco"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Colline", members: ["Marco", "Giacomo", "Matteo"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Little England", members: ["Salvatore", "Marlen", "Nicol√≤", "Alessia B"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            6: {
                location: "Kandy",
                emoji: "üëë",
                groups: [
                    { name: "Gruppo Reali", members: ["Giacomo", "Martina", "Noemi"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Templi", members: ["Alessia B", "Dario", "Francesco"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Cultura", members: ["Salvatore", "Giulio", "Alessia A"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Tradizioni", members: ["Nicol√≤", "Marco", "Marlen", "Matteo"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            7: {
                location: "Dambulla",
                emoji: "üèõÔ∏è",
                groups: [
                    { name: "Gruppo Grotte", members: ["Marlen", "Giacomo", "Salvatore"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Buddha", members: ["Alessia A", "Matteo", "Dario"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Affreschi", members: ["Francesco", "Nicol√≤", "Martina"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Spirituali", members: ["Marco", "Noemi", "Giulio", "Alessia B"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            8: {
                location: "Sigiriya",
                emoji: "ü¶Å",
                groups: [
                    { name: "Gruppo Roccia", members: ["Nicol√≤", "Marlen", "Francesco"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Leone", members: ["Marco", "Alessia B", "Matteo"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Scalatori", members: ["Giulio", "Salvatore", "Alessia A"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Fortezza", members: ["Dario", "Giacomo", "Noemi", "Martina"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            9: {
                location: "Trincomalee/Pasikudah",
                emoji: "üèñÔ∏è",
                groups: [
                    { name: "Gruppo Spiaggia", members: ["Alessia A", "Nicol√≤", "Marco"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Mare", members: ["Matteo", "Francesco", "Martina"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Relax", members: ["Salvatore", "Marlen", "Noemi"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Onde", members: ["Giulio", "Dario", "Giacomo", "Alessia B"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            10: {
                location: "Trincomalee/Pasikudah",
                emoji: "üèñÔ∏è",
                groups: [
                    { name: "Gruppo Snorkeling", members: ["Dario", "Alessia A", "Salvatore"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Sole", members: ["Giacomo", "Marco", "Marlen"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Sabbia", members: ["Alessia B", "Francesco", "Matteo"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Paradiso", members: ["Noemi", "Nicol√≤", "Giulio", "Martina"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            11: {
                location: "Anuradhapura",
                emoji: "üèõÔ∏è",
                groups: [
                    { name: "Gruppo Antichi", members: ["Marco", "Dario", "Noemi"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Sacri", members: ["Alessia B", "Salvatore", "Marlen"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Rovine", members: ["Matteo", "Giulio", "Nicol√≤"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Storia", members: ["Francesco", "Alessia A", "Giacomo", "Martina"], color: "bg-violet-100 border-violet-300" }
                ]
            },
            12: {
                location: "Partenza",
                emoji: "‚úàÔ∏è",
                groups: [
                    { name: "Gruppo Nostalgia", members: ["Giulio", "Alessia A", "Dario"], color: "bg-blue-100 border-blue-300" },
                    { name: "Gruppo Ricordi", members: ["Martina", "Nicol√≤", "Marco"], color: "bg-emerald-100 border-emerald-300" },
                    { name: "Gruppo Addii", members: ["Francesco", "Noemi", "Salvatore"], color: "bg-amber-100 border-amber-300" },
                    { name: "Gruppo Arrivederci", members: ["Alessia B", "Giacomo", "Marlen", "Matteo"], color: "bg-violet-100 border-violet-300" }
                ]
            }
        };

        // All participants for random shuffle
        const allParticipants = [
            "Alessia B", "Alessia A", "Giacomo", "Martina", "Noemi", "Salvatore", 
            "Nicol√≤", "Marco", "Marlen", "Matteo", "Dario", "Francesco", "Giulio", "Sabrina"
        ];

        // All participants for room assignment (including Sabrina)
        const allParticipantsForRooms = [
            "Alessia B", "Alessia A", "Giacomo", "Martina", "Noemi", "Salvatore", 
            "Nicol√≤", "Marco", "Marlen", "Matteo", "Dario", "Francesco", "Giulio", "Sabrina"
        ];

        // Shuffle Groups Functions
        function showShuffleGroups(day) {
            const dayData = shuffleGroups[day];
            const display = document.getElementById('shuffleGroupsDisplay');
            
            // Calculate trip dates (August 18-29, 2025)
            const tripStartDate = new Date('2025-08-18');
            const currentDate = new Date();
            const dayDate = new Date(tripStartDate);
            dayDate.setDate(tripStartDate.getDate() + (day - 1));
            
            // Check if it's the right day (or past that day)
            const isAvailable = currentDate >= dayDate;
            
            // Reset all day buttons
            document.querySelectorAll('.shuffle-day-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-orange-400', 'bg-orange-200');
            });
            
            // Highlight selected day
            event.target.classList.add('ring-2', 'ring-orange-400', 'bg-orange-200');
            
            if (!isAvailable) {
                display.innerHTML = `
                    <div class="text-center">
                        <div class="text-4xl mb-3">üîí</div>
                        <h4 class="text-lg font-semibold text-slate-800 mb-2">Giorno ${day} - ${dayData.location}</h4>
                        <div class="bg-slate-100 rounded-xl p-6 border border-slate-300">
                            <div class="text-6xl mb-4">ü§´</div>
                            <h5 class="text-lg font-medium text-slate-700 mb-3">Gruppi Segreti!</h5>
                            <p class="text-slate-600 mb-4">I gruppi per questo giorno sono ancora top secret! üïµÔ∏è‚Äç‚ôÄÔ∏è</p>
                            <p class="text-sm text-slate-500">Si sbloccheranno automaticamente il <strong>${dayDate.toLocaleDateString('it-IT', { 
                                weekday: 'long', 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}</strong></p>
                            <div class="mt-4 text-2xl">‚è∞</div>
                        </div>
                    </div>
                `;
                return;
            }
            
            display.innerHTML = `
                <div class="text-center mb-6">
                    <div class="text-4xl mb-3">${dayData.emoji}</div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">Giorno ${day} - ${dayData.location}</h4>
                    <p class="text-sm text-slate-600">Ogni gruppo deve fare almeno una foto insieme! üì∏</p>
                    <div class="text-xs text-green-600 font-medium mt-2">‚úÖ Gruppi sbloccati!</div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${dayData.groups.map((group, index) => `
                        <div class="rounded-xl p-4 border-2 ${group.color}">
                            <h5 class="font-semibold text-slate-800 mb-3 text-center">${group.name}</h5>
                            <div class="space-y-2">
                                ${group.members.map(member => `
                                    <div class="bg-white rounded-lg px-3 py-2 text-center text-sm font-medium text-slate-700 shadow-sm">
                                        ${member}
                                    </div>
                                `).join('')}
                            </div>
                            <div class="mt-3 text-center">
                                <div class="text-xs text-slate-500">üë• ${group.members.length} persone</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-6 bg-orange-50 rounded-xl p-4 border border-orange-200">
                    <h5 class="font-medium text-slate-800 mb-2">üì∏ Missione del Giorno</h5>
                    <p class="text-sm text-slate-600">Ogni gruppo deve scattare almeno una foto insieme durante il momento pi√π bello/divertente/memorabile della giornata. Condividete poi le foto nel gruppo WhatsApp con l'hashtag #Shuffle${day}!</p>
                </div>
            `;
        }

        function generateRandomShuffle() {
            // Create a copy of participants array and shuffle it
            const shuffled = [...allParticipants].sort(() => Math.random() - 0.5);
            
            // Create groups: 3+3+3+2+3 (total 14)
            const groups = [
                { name: "Gruppo Alpha", members: shuffled.slice(0, 3), color: "bg-blue-100 border-blue-300" },
                { name: "Gruppo Beta", members: shuffled.slice(3, 6), color: "bg-emerald-100 border-emerald-300" },
                { name: "Gruppo Gamma", members: shuffled.slice(6, 9), color: "bg-amber-100 border-amber-300" },
                { name: "Gruppo Delta", members: shuffled.slice(9, 11), color: "bg-violet-100 border-violet-300" },
                { name: "Gruppo Epsilon", members: shuffled.slice(11, 14), color: "bg-pink-100 border-pink-300" }
            ];
            
            const display = document.getElementById('randomShuffleDisplay');
            
            display.innerHTML = `
                <div class="text-center mb-4">
                    <div class="text-2xl mb-2">üé≤</div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">Shuffle Casuale Generato!</h4>
                    <p class="text-sm text-slate-600">Ecco i vostri nuovi gruppi casuali!</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${groups.map((group, index) => `
                        <div class="rounded-xl p-4 border-2 ${group.color}">
                            <h5 class="font-semibold text-slate-800 mb-3 text-center">${group.name}</h5>
                            <div class="space-y-2">
                                ${group.members.map(member => `
                                    <div class="bg-white rounded-lg px-3 py-2 text-center text-sm font-medium text-slate-700 shadow-sm">
                                        ${member}
                                    </div>
                                `).join('')}
                            </div>
                            <div class="mt-3 text-center">
                                <div class="text-xs text-slate-500">üë• ${group.members.length} persone</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-4 bg-orange-50 rounded-xl p-4 border border-orange-200">
                    <h5 class="font-medium text-slate-800 mb-2">üì∏ Missione Speciale</h5>
                    <p class="text-sm text-slate-600">Questi gruppi casuali devono fare una foto insieme entro la fine della giornata! Siate creativi! üé®</p>
                </div>
            `;
            display.classList.remove('hidden');
        }

        // Daily Questions Data
        const dailyQuestions = {
            1: {
                emoji: "üèñÔ∏è",
                location: "Negombo - Arrivo",
                question: "Cane o gatto?",
                followUp: "Il dibattito che ha diviso pi√π famiglie della politica! Siete team 'fedelt√† incondizionata anche se distruggo casa' o team 'ti amo ma alle mie condizioni e solo quando ho voglia'? Raccontate il momento pi√π epico con il vostro animale preferito. Se non ne avete uno, inventate una storia cos√¨ assurda che ci crederemo comunque! üêïüê±"
            },
            2: {
                emoji: "üè∞",
                location: "Galle",
                question: "Mare o montagna?",
                followUp: "Eterna lotta tra chi dice 'il mare rilassa l'anima' (mentre viene divorato dalle zanzare) e chi sostiene 'la montagna purifica lo spirito' (mentre ansima come un cane dopo 10 metri di salita). Qual √® il posto che vi ha fatto pensare 'ok, qui fingo di perdermi e non torno pi√π a casa'? üèîÔ∏èüåä"
            },
            3: {
                emoji: "üêò",
                location: "Udawalawe",
                question: "Dolce o salato?",
                followUp: "Momento verit√†: cosa nascondete VERAMENTE nel cassetto segreto per i momenti di crisi esistenziale? E non provate a dirmi 'frutta secca' o 'barrette proteiche' perch√© sappiamo tutti che l√¨ dentro c'√® una scorta di Nutella/patatine che farebbe invidia a un bunker! Confessate i vostri peccati di gola! üç´üçü"
            },
            4: {
                emoji: "üöÇ",
                location: "Ella",
                question: "Mattiniero o nottambulo?",
                followUp: "Siete quelli che alle 6 del mattino twittano 'Buongiorno mondo!' (e tutti vi odiano) o quelli che alle 3 di notte pensano 'ok, ADESSO vado a dormire' e poi finiscono a guardare video di gatti che suonano il piano? Confessate l'orario pi√π assurdo in cui avete fatto qualcosa di 'produttivo'! ‚è∞ü¶â"
            },
            5: {
                emoji: "üçÉ",
                location: "Nuwara Eliya",
                question: "T√® o caff√®?",
                followUp: "PLOT TWIST: siamo nelle piantagioni di t√® pi√π famose al mondo e facciamo questa domanda! Siete team 'cerimonia del t√® con sottofondo di musica zen' o team 'caff√® endovena appena apro gli occhi altrimenti sono un pericolo per la societ√†'? E soprattutto: quante tazzine servono per trasformarvi da zombie a essere umano funzionante? ‚òïüçµ"
            },
            6: {
                emoji: "üëë",
                location: "Kandy",
                question: "Se poteste avere un superpotere per un giorno, quale scegliereste?",
                followUp: "E non vale dire 'dormire 8 ore e svegliarsi riposati' perch√© quello √® fantascienza pura! Cosa fareste come prima cosa? Salvare il mondo, scoprire dove finiscono tutti i calzini spaiati, o finalmente capire perch√© la lavatrice si mangia sempre UNA sola calza? Siate creativi, abbiamo 24 ore di onnipotenza! ü¶∏‚Äç‚ôÄÔ∏è‚ú®"
            },
            7: {
                emoji: "üèõÔ∏è",
                location: "Dambulla",
                question: "Qual √® la cosa pi√π strana che avete mai mangiato?",
                followUp: "Preparazione mentale per il curry che ci far√† lacrimare come a un matrimonio! Era buono? Lo rimangereste? E soprattutto... l'avete DAVVERO finito o avete fatto il gioco di prestigio con il tovagliolo mentre nessuno guardava? Bonus point se l'avete mangiato per fare colpo su qualcuno! üå∂Ô∏èü§¢"
            },
            8: {
                emoji: "ü¶Å",
                location: "Sigiriya",
                question: "Se foste un animale, quale sareste?",
                followUp: "E non vale dire 'un gatto perch√© dormono 16 ore al giorno' (anche se √® una motivazione validissima)! Quale animale rappresenta DAVVERO la vostra personalit√†? Sareste il leone che ruggisce ma poi si nasconde dietro la leonessa, o il pinguino che sembra elegante ma in realt√† √® un disastro ambulante? ü¶Åüêß"
            },
            9: {
                emoji: "üèñÔ∏è",
                location: "Trincomalee/Pasikudah",
                question: "Qual √® il vostro guilty pleasure musicale?",
                followUp: "Quella canzone che cantate a squarciagola sotto la doccia, che mettete a palla quando siete soli in macchina, ma che cambiate pi√π velocemente della luce se sale qualcuno! Dai, siamo in spiaggia, √® il momento delle confessioni musicali pi√π imbarazzanti! Chi ha ancora 'Gangnam Style' nella playlist? üéµüôà"
            },
            10: {
                emoji: "üèñÔ∏è",
                location: "Trincomalee/Pasikudah",
                question: "Se poteste cenare con una persona famosa (viva o morta), chi scegliereste?",
                followUp: "E non vale dire 'mia nonna' (anche se la capiamo e probabilmente cucinerebbe meglio di chiunque altro)! Cosa gli/le chiedereste? Dove andreste a mangiare? E la domanda pi√π importante: chi pagherebbe il conto? Perch√© se scegliete Berlusconi almeno siete sicuri che offre lui! üí∏üçΩÔ∏è"
            },
            11: {
                emoji: "üèõÔ∏è",
                location: "Anuradhapura",
                question: "Qual √® la cosa pi√π imbarazzante che vi sia mai capitata?",
                followUp: "Siamo al penultimo giorno, ormai ci conosciamo abbastanza per sopravvivere a QUALSIASI rivelazione! √à il momento del grande catartico: liberate l'imbarazzo che vi portate dietro da anni! Bonus point se √® successo in viaggio, doppio bonus se c'erano testimoni, triplo bonus se √® finito sui social! üôàüì∏"
            },
            12: {
                emoji: "‚úàÔ∏è",
                location: "Partenza",
                question: "Qual √® stata la cosa pi√π bella di questo viaggio?",
                followUp: "Momento nostalgia: cosa vi porterete nel cuore oltre alle 47.000 foto che avete fatto? Cosa vi mancher√† di pi√π del gruppo? Chi di voi pianger√† per primo in aeroporto? (E non mentite, sappiamo gi√† che saremo tutti l√¨ con gli occhi lucidi a fingere che √® colpa del vento!) ü•∫‚úàÔ∏è‚ù§Ô∏è"
            }
        };

        const randomQuestions = [
            "Se poteste vivere in qualsiasi epoca storica, quale scegliereste? (E no, 'quando non esistevano le tasse' non √® un'epoca valida, anche se tutti la pensiamo!) Sareste sopravvissuti senza WiFi e delivery? üè∞üì±",
            "Qual √® il vostro film comfort food? Quello che guardate quando il mondo vi sembra troppo complicato e l'unica soluzione √® piangere/ridere/mangiare gelato direttamente dalla vaschetta mentre indossate il pigiama pi√π brutto che avete? üçøüò≠",
            "Pizza con ananas: crimine contro l'umanit√† che dovrebbe essere punito dal codice penale, o genialata incompresa di un visionario? Motivate la risposta come se foste in tribunale e la vostra vita dipendesse da questo! ‚öñÔ∏èüçç",
            "Se doveste scegliere UN SOLO cibo per il resto della vita, quale sarebbe? (E pensateci bene, perch√© 'pizza' significa anche pizza con le acciughe, agli spinaci e quella vegana che sa di cartone!) Siete pronti al commitment? üçïüíç",
            "Qual √® la bugia bianca che raccontate pi√π spesso? ('Sto arrivando' quando siete ancora in pigiama, 'ho letto e accetto i termini e condizioni', 'no no, non ho mangiato l'ultimo biscotto'...) Confessate! ü§•üç™",
            "Preferite essere SEMPRE in ritardo di 20 minuti (e far venire l'ansia a tutti) o SEMPRE in anticipo di 20 minuti (e passare la vita ad aspettare guardando l'orologio)? Scegliete il vostro tipo di stress! ‚è∞üòÖ",
            "Se poteste eliminare UNA cosa dal mondo per sempre, cosa scegliereste? (Le zanzare sono una risposta validissima, ma anche i luned√¨ mattina o le persone che non mettono la freccia!) ü¶üüíÄ",
            "Qual √® il vostro talento nascosto? Quello che tirate fuori alle feste per impressionare la gente, tipo riuscire a toccarvi il naso con la lingua o ricordare tutte le sigle dei cartoni degli anni '90? üé≠‚ú®",
            "Doccia bollente che vi cuoce come aragoste in pentola o doccia gelida che vi sveglia meglio di 5 caff√® ma vi fa urlare come nei film horror? Scegliete la vostra tortura quotidiana! ü¶ûüßä",
            "Se foste un gelato, che gusto sareste? E soprattutto, sareste quello che finisce sempre per primo (tipo stracciatella) o quello che rimane sempre l√¨ triste e abbandonato (tipo pistacchio)? üç¶üò¢",
            "Qual √® la cosa pi√π coraggiosa che abbiate mai fatto? (Anche dire 'no grazie' alla nonna che vi offre il quarto piatto di pasta conta come atto di estremo coraggio!) üí™üëµ",
            "Preferite sapere tutto del futuro (e rovinarvi per sempre il gusto della sorpresa) o vivere nell'incertezza totale (e avere sempre l'ansia di non sapere cosa succeder√†)? Scegliete il vostro tipo di paranoia! üîÆüò∞",
            "Se poteste parlare con gli animali per un giorno, quale incontrereste per primo? E cosa gli chiedereste? ('Perch√© fai sempre pip√¨ proprio dove ho appena pulito?' √® una domanda legittima!) üêïüí¨",
            "Qual √® il vostro ricordo d'infanzia che vi fa ancora sorridere come scemi quando ci pensate? Quello che vi fa tornare bambini per 5 secondi e dimenticare le bollette da pagare? üë∂üòä",
            "Se doveste aprire un ristorante, come si chiamerebbe? (Bonus point per nomi completamente assurdi tipo 'Il Pollo Depresso' o 'Pasta La Vista Baby'!) üçùü§™",
            "Preferite essere famosi (e non poter mai pi√π andare al supermercato in tuta) o ricchi (ma completamente sconosciuti e liberi di fare figure di merda in pace)? üì∏üí∞",
            "Qual √® la cosa pi√π strana che collezionate o avete mai collezionato? (I biglietti del cinema, le scatole vuote 'che potrebbero servire', i tappi di bottiglia... confessate le vostre ossessioni!) üì¶üé´",
            "Se poteste cambiare il vostro nome, quale scegliereste? O siete team 'i miei genitori hanno fatto centro' e non cambiereste nemmeno una lettera? Sareste stati dei 'Kevin' o delle 'Chanel'? üìù‚ú®",
            "Qual √® il vostro modo preferito per rilassarvi dopo una giornata di merda? (E 'scrollare Instagram per 3 ore fino alle 2 di notte' √® una risposta tristemente onesta che accettiamo!) üì±üò¥",
            "Se foste un personaggio di un cartone animato, quale sareste? E perch√© proprio quello? Sareste l'eroe o quello che fa sempre disastri ma alla fine si salva per miracolo? ü¶∏‚Äç‚ôÄÔ∏èü§°",
            "Siete team 'leggo la fine del libro/spoiler del film per sapere se vale la pena' o team 'piuttosto muoio che rovinarmi la sorpresa'? Scegliete il vostro rapporto con l'ansia! üìöüôà",
            "Qual √® la cosa pi√π spontanea e folle che abbiate mai fatto? Quella che ancora oggi vi fa pensare 'ma chi me l'ha fatto fare?' ma che in fondo non rimpiangete? üé¢üò±",
            "Se poteste parlare con il voi di 10 anni fa per 10 minuti, cosa vi direste? (Oltre a 'compra Bitcoin', 'non tagliare i capelli cos√¨' e 'quella persona non ne vale la pena'!) ‚è∞üí≠",
            "Qual √® il vostro posto del cuore? Quello dove andreste se aveste bisogno di ricaricare le batterie e ritrovare la pace interiore (o almeno fingere di averla)? üèûÔ∏èüíö",
            "Scelta impossibile da psicopatici: non poter mai pi√π ascoltare musica o non poter mai pi√π guardare film/serie TV? Quale parte della vostra anima siete disposti a sacrificare? üéµüì∫",
            "Qual √® la cosa pi√π bella che qualcuno vi abbia mai detto? Quella che vi ha fatto sciogliere il cuore e che vi ricordate ancora quando avete bisogno di sorridere? üíïüòä",
            "Se foste invisibili per un giorno, cosa fareste? (E siate onesti, almeno un po' di spionaggio innocente lo fareste tutti! O entrare gratis al cinema...) üëªüïµÔ∏è",
            "Come preferite iniziare la giornata? Siete team 'sveglia e subito operativi come robot' o team 'non parlatemi finch√© non ho bevuto almeno 3 caff√® e fatto pace con l'esistenza'? ‚òïü§ñ",
            "Descrivervi con tre aggettivi: andate! (E 'stanco', 'affamato' e 'confuso' non valgono come descrizione principale, anche se sono i pi√π onesti!) üìùüòÖ",
            "Qual √® la tradizione di famiglia pi√π assurda/bella/imbarazzante che avete? Quella che raccontereste ai vostri figli o che sperate si perda per sempre nelle generazioni future? üë®‚Äçüë©‚Äçüëß‚Äçüë¶üé≠"
        ];

        function showDailyQuestion(day) {
            const question = dailyQuestions[day];
            const display = document.getElementById('dailyQuestionDisplay');
            
            // Calculate trip dates (August 18-29, 2025) in Sri Lanka timezone
            const tripStartDate = new Date('2025-08-18T00:00:00+05:30'); // Sri Lanka is UTC+5:30
            const currentDate = new Date();
            
            // Convert current time to Sri Lanka timezone
            const sriLankaTime = new Date(currentDate.toLocaleString("en-US", {timeZone: "Asia/Colombo"}));
            
            const dayDate = new Date(tripStartDate);
            dayDate.setDate(tripStartDate.getDate() + (day - 1));
            
            // Check if it's the right day (or past that day) in Sri Lanka timezone
            const isAvailable = sriLankaTime >= dayDate;
            
            // Reset all day buttons
            document.querySelectorAll('.daily-day-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-purple-400', 'bg-purple-200');
            });
            
            // Highlight selected day
            event.target.classList.add('ring-2', 'ring-purple-400', 'bg-purple-200');
            
            if (!isAvailable) {
                display.innerHTML = `
                    <div class="text-center">
                        <div class="text-4xl mb-3">üîí</div>
                        <h4 class="text-lg font-semibold text-slate-800 mb-2">Giorno ${day} - ${question.location}</h4>
                        <div class="bg-slate-100 rounded-xl p-6 border border-slate-300">
                            <div class="text-6xl mb-4">ü§ê</div>
                            <h5 class="text-lg font-medium text-slate-700 mb-3">Domanda Segreta!</h5>
                            <p class="text-slate-600 mb-4">La domanda del giorno √® ancora top secret! üïµÔ∏è‚Äç‚ôÄÔ∏è</p>
                            <p class="text-sm text-slate-500">Si sbloccher√† automaticamente il <strong>${dayDate.toLocaleDateString('it-IT', { 
                                weekday: 'long', 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}</strong></p>
                            <p class="text-xs text-slate-400 mt-2">(Orario Sri Lanka: ${sriLankaTime.toLocaleString('it-IT', {
                                timeZone: 'Asia/Colombo',
                                weekday: 'short',
                                day: '2-digit',
                                month: '2-digit',
                                hour: '2-digit',
                                minute: '2-digit'
                            })})</p>
                            <div class="mt-4 text-2xl">‚è∞</div>
                        </div>
                    </div>
                `;
                return;
            }
            
            display.innerHTML = `
                <div class="text-center">
                    <div class="text-4xl mb-3">${question.emoji}</div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">Giorno ${day} - ${question.location}</h4>
                    <div class="text-xs text-green-600 font-medium mb-4">‚úÖ Domanda sbloccata!</div>
                    <div class="bg-purple-50 rounded-xl p-4 border border-purple-200 mb-4">
                        <h5 class="text-xl font-medium text-purple-800 mb-3">${question.question}</h5>
                        <p class="text-sm text-purple-600">${question.followUp}</p>
                    </div>
                </div>
            `;
        }

        function generateRandomQuestion() {
            const randomIndex = Math.floor(Math.random() * randomQuestions.length);
            const question = randomQuestions[randomIndex];
            const display = document.getElementById('randomQuestionDisplay');
            
            display.innerHTML = `
                <div class="bg-purple-50 rounded-xl p-4 border border-purple-200 text-center">
                    <div class="text-2xl mb-2">üé≤</div>
                    <h5 class="text-lg font-medium text-purple-800 mb-2">Domanda Random</h5>
                    <p class="text-purple-700">${question}</p>
                </div>
            `;
            display.classList.remove('hidden');
        }

        // Simple Room Assignment Function

        function generateRandomRooms() {
            const allowMixed = document.getElementById('allowMixed').checked;
            const allowTriple = document.getElementById('allowTriple').checked;
            const rooms = generateSimpleRoomAssignment(allowMixed, allowTriple);
            displaySimpleGeneratedRooms(rooms, allowMixed, allowTriple);
        }
        
        function generateSimpleRoomAssignment(allowMixed, allowTriple) {
            const rooms = [];
            const colors = ["bg-blue-100 border-blue-300", "bg-emerald-100 border-emerald-300", "bg-amber-100 border-amber-300", 
                           "bg-violet-100 border-violet-300", "bg-pink-100 border-pink-300", "bg-rose-100 border-rose-300"];
            
            // Define gender groups
            const females = ["Alessia B", "Alessia A", "Martina", "Noemi", "Marlen", "Sabrina"];
            const males = ["Giacomo", "Salvatore", "Nicol√≤", "Marco", "Matteo", "Dario", "Francesco", "Giulio"];
            
            let colorIndex = 0;
            const maxRoomSize = allowTriple ? 3 : 2;
            
            // Fixed couples - ALWAYS together
            rooms.push({
                type: "Doppia",
                occupants: ["Noemi", "Salvatore"],
                color: colors[colorIndex++],
                isCouple: true
            });
            
            rooms.push({
                type: "Doppia", 
                occupants: ["Dario", "Francesco"],
                color: colors[colorIndex++],
                isCouple: true
            });
            
            // Remaining 9 participants to assign (excluding the 4 in couples)
            const remainingFemales = ["Alessia B", "Alessia A", "Martina", "Marlen", "Sabrina"]; // 5 females
            const remainingMales = ["Giacomo", "Nicol√≤", "Marco", "Matteo", "Giulio"]; // 5 males
            
            // Shuffle the remaining participants
            const shuffledFemales = [...remainingFemales].sort(() => Math.random() - 0.5);
            const shuffledMales = [...remainingMales].sort(() => Math.random() - 0.5);
            
            if (allowMixed) {
                // Mixed rooms allowed - combine all remaining 9 participants
                const allRemaining = [...shuffledFemales, ...shuffledMales].sort(() => Math.random() - 0.5);
                
                // Create rooms with remaining 9 participants
                while (allRemaining.length > 0) {
                    if (allRemaining.length >= maxRoomSize && allowTriple) {
                        // Create triple room (only if allowed)
                        rooms.push({
                            type: "Tripla",
                            occupants: [allRemaining.pop(), allRemaining.pop(), allRemaining.pop()],
                            color: colors[colorIndex % colors.length],
                            isMixed: true
                        });
                    } else if (allRemaining.length >= 2) {
                        // Create double room
                        rooms.push({
                            type: "Doppia",
                            occupants: [allRemaining.pop(), allRemaining.pop()],
                            color: colors[colorIndex % colors.length],
                            isMixed: true
                        });
                    } else {
                        // Add remaining person to an existing non-couple room (if space and triple allowed)
                        const existingRoom = rooms.find(room => 
                            !room.isCouple && room.occupants.length < maxRoomSize
                        );
                        if (existingRoom && allowTriple) {
                            existingRoom.occupants.push(allRemaining.pop());
                            existingRoom.type = existingRoom.occupants.length === 3 ? "Tripla" : "Doppia";
                        } else {
                            // Create single room if no space or triple not allowed
                            rooms.push({
                                type: "Singola",
                                occupants: [allRemaining.pop()],
                                color: colors[colorIndex % colors.length],
                                isMixed: true
                            });
                        }
                    }
                    colorIndex++;
                }
            } else {
                // Gender-separated rooms - females and males in separate rooms
                
                // Assign females (5 remaining)
                while (shuffledFemales.length > 0) {
                    if (shuffledFemales.length >= maxRoomSize && allowTriple) {
                        // Create triple female room (only if allowed)
                        rooms.push({
                            type: "Tripla",
                            occupants: [shuffledFemales.pop(), shuffledFemales.pop(), shuffledFemales.pop()],
                            color: colors[colorIndex % colors.length],
                            gender: "female"
                        });
                    } else if (shuffledFemales.length >= 2) {
                        // Create double female room
                        rooms.push({
                            type: "Doppia",
                            occupants: [shuffledFemales.pop(), shuffledFemales.pop()],
                            color: colors[colorIndex % colors.length],
                            gender: "female"
                        });
                    } else {
                        // Add remaining female to existing female room (if space and triple allowed)
                        const existingFemaleRoom = rooms.find(room => 
                            room.gender === "female" && room.occupants.length < maxRoomSize
                        );
                        if (existingFemaleRoom && allowTriple) {
                            existingFemaleRoom.occupants.push(shuffledFemales.pop());
                            existingFemaleRoom.type = existingFemaleRoom.occupants.length === 3 ? "Tripla" : "Doppia";
                        } else {
                            // Create single room
                            rooms.push({
                                type: "Singola",
                                occupants: [shuffledFemales.pop()],
                                color: colors[colorIndex % colors.length],
                                gender: "female"
                            });
                        }
                    }
                    colorIndex++;
                }
                
                // Assign males (5 remaining)
                while (shuffledMales.length > 0) {
                    if (shuffledMales.length >= maxRoomSize && allowTriple) {
                        // Create triple male room (only if allowed)
                        rooms.push({
                            type: "Tripla",
                            occupants: [shuffledMales.pop(), shuffledMales.pop(), shuffledMales.pop()],
                            color: colors[colorIndex % colors.length],
                            gender: "male"
                        });
                    } else if (shuffledMales.length >= 2) {
                        // Create double male room
                        rooms.push({
                            type: "Doppia",
                            occupants: [shuffledMales.pop(), shuffledMales.pop()],
                            color: colors[colorIndex % colors.length],
                            gender: "male"
                        });
                    } else {
                        // Add remaining male to existing male room (if space and triple allowed)
                        const existingMaleRoom = rooms.find(room => 
                            room.gender === "male" && room.occupants.length < maxRoomSize
                        );
                        if (existingMaleRoom && allowTriple) {
                            existingMaleRoom.occupants.push(shuffledMales.pop());
                            existingMaleRoom.type = existingMaleRoom.occupants.length === 3 ? "Tripla" : "Doppia";
                        } else {
                            // Create single room
                            rooms.push({
                                type: "Singola",
                                occupants: [shuffledMales.pop()],
                                color: colors[colorIndex % colors.length],
                                gender: "male"
                            });
                        }
                    }
                    colorIndex++;
                }
            }
            
            return rooms;
        }
        
        function displaySimpleGeneratedRooms(rooms, allowMixed, allowTriple) {
            const display = document.getElementById('randomRoomsDisplay');
            const females = ["Alessia B", "Alessia A", "Martina", "Noemi", "Marlen", "Sabrina"];
            
            display.innerHTML = `
                <div class="text-center mb-4">
                    <div class="text-2xl mb-2">üé≤</div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">Sorteggio Completato!</h4>
                    <div class="space-y-1">
                        ${allowMixed ? '<p class="text-xs text-green-600 font-medium">‚úÖ Camere miste consentite</p>' : '<p class="text-xs text-blue-600 font-medium">üöª Camere separate per genere</p>'}
                        ${allowTriple ? '<p class="text-xs text-purple-600 font-medium">‚úÖ Camere triple consentite</p>' : '<p class="text-xs text-orange-600 font-medium">üè† Solo camere doppie</p>'}
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${rooms.map((room, index) => {
                        const roomGenders = room.occupants.map(p => 
                            females.includes(p) ? 'üë©' : 'üë®'
                        ).join(' ');
                        
                        // Check if room is mixed (has both genders and is not a fixed couple)
                        const hasFemales = room.occupants.some(p => females.includes(p));
                        const hasMales = room.occupants.some(p => !females.includes(p));
                        const isMixed = hasFemales && hasMales && !room.isCouple;
                        
                        return `
                        <div class="rounded-xl p-4 border-2 ${room.color}">
                            <div class="flex justify-between items-center mb-3">
                                <h5 class="font-semibold text-slate-800">${room.type}</h5>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm">${roomGenders}</span>
                                    ${room.isCouple ? '<span class="text-xs bg-pink-100 px-2 py-1 rounded-full font-medium text-pink-700">üíë</span>' : ''}
                                    ${isMixed ? '<span class="text-xs bg-purple-100 px-2 py-1 rounded-full font-medium text-purple-700">üîÄ</span>' : ''}
                                </div>
                            </div>
                            <div class="space-y-2">
                                ${room.occupants.map(occupant => `
                                    <div class="bg-white rounded-lg px-3 py-2 text-center text-sm font-medium text-slate-700 shadow-sm">
                                        ${occupant}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    }).join('')}
                </div>
                
                <div class="mt-4 bg-teal-50 rounded-xl p-4 border border-teal-200">
                    <h5 class="font-medium text-slate-800 mb-2">üéØ Risultato Sorteggio</h5>
                    <div class="text-sm text-slate-600 space-y-1">
                        <p>‚Ä¢ <strong>Coppie fisse:</strong> Noemi & Salvatore üíë, Dario & Francesco üíë</p>
                        <p>‚Ä¢ <strong>Altri 9 partecipanti:</strong> ${allowMixed ? 'sorteggiati liberamente (camere miste possibili)' : 'sorteggiati per genere (camere separate)'}</p>
                        <p>‚Ä¢ <strong>Tipo camere:</strong> ${allowTriple ? 'doppie e triple consentite' : 'solo camere doppie (max 2 persone)'}</p>
                        <div class="flex items-center space-x-4 mt-2 text-xs">
                            <span>üíë = Coppia fissa</span>
                            ${allowMixed ? '<span>üîÄ = Camera mista</span>' : ''}
                        </div>
                        <p class="text-xs mt-2 italic">üí° Clicca di nuovo per un nuovo sorteggio!</p>
                    </div>
                </div>
            `;
            display.classList.remove('hidden');
        }

        // Food Preferences Form Handler
        document.addEventListener('DOMContentLoaded', function() {
            // Keep all sections hidden since we're using modals now
            loadDiaryEntries();
            

        });

        // Diary Management Functions
        function loadDiaryEntries() {
            const entries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
            const container = document.getElementById('diaryEntriesContainer');
            container.innerHTML = '';
            
            if (entries.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-slate-500 py-8">
                        <div class="text-4xl mb-3">üìñ</div>
                        <p>Il diario √® ancora vuoto...</p>
                        <p class="text-sm mt-2">Sii il primo a condividere un ricordo! ‚ú®</p>
                    </div>
                `;
                return;
            }
            
            // Sort entries by date (newest first)
            entries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            entries.forEach((entry, index) => {
                const entryCard = document.createElement('div');
                entryCard.className = 'bg-white rounded-xl p-4 border border-orange-200 shadow-sm';
                
                const entryDate = new Date(entry.timestamp);
                const formattedDate = entryDate.toLocaleDateString('it-IT', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                entryCard.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="font-semibold text-slate-800 text-sm">‚úçÔ∏è ${entry.author}</span>
                                ${entry.location ? `<span class="text-xs bg-orange-100 px-2 py-1 rounded-full text-orange-700">üìç ${entry.location}</span>` : ''}
                            </div>
                            <div class="text-xs text-slate-500">${formattedDate}</div>
                        </div>
                        <button onclick="confirmDeleteDiaryEntry(${index})" 
                                class="text-slate-400 hover:text-red-500 transition-colors text-sm ml-2 p-1 rounded hover:bg-red-50"
                                title="Elimina questo post">
                            üóëÔ∏è
                        </button>
                    </div>
                    <div class="text-sm text-slate-700 leading-relaxed whitespace-pre-wrap">${entry.message}</div>
                `;
                container.appendChild(entryCard);
            });
        }

        function addDiaryEntry() {
            const message = document.getElementById('diaryMessage').value.trim();
            const author = document.getElementById('diaryAuthor').value.trim();
            const location = document.getElementById('diaryLocation').value.trim();

            if (!message) {
                alert('Per favore scrivi almeno un messaggio!');
                return;
            }

            const entries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
            
            const newEntry = {
                message,
                author: author || 'Viaggiatore Anonimo',
                location: location || null,
                timestamp: new Date().toISOString(),
                id: Date.now()
            };

            entries.push(newEntry);
            localStorage.setItem('sriLankaDiary', JSON.stringify(entries));

            clearDiaryForm();
            loadDiaryEntries();
            showDiarySuccessMessage();
        }

        function clearDiaryForm() {
            document.getElementById('diaryMessage').value = '';
            document.getElementById('diaryAuthor').value = '';
            document.getElementById('diaryLocation').value = '';
        }

        function showDiarySuccessMessage() {
            const button = document.querySelector('button[onclick="addDiaryEntry()"]');
            const originalText = button.innerHTML;
            button.innerHTML = '‚úÖ Aggiunto al diario!';
            button.className = 'w-full bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.className = 'w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm';
            }, 2000);
        }

        function confirmDeleteDiaryEntry(index) {
            const entries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
            const entry = entries[index];
            
            // Create custom confirmation modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-xl p-6 max-w-md mx-4 shadow-2xl">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-3">üóëÔ∏è</div>
                        <h3 class="text-lg font-semibold text-slate-800 mb-2">Elimina Post dal Diario</h3>
                        <p class="text-sm text-slate-600 mb-4">Sei sicuro di voler eliminare questo ricordo?</p>
                        
                        <div class="bg-slate-50 rounded-lg p-3 text-left mb-4">
                            <div class="text-xs text-slate-500 mb-1">
                                <strong>‚úçÔ∏è ${entry.author}</strong>
                                ${entry.location ? ` ‚Ä¢ üìç ${entry.location}` : ''}
                            </div>
                            <div class="text-sm text-slate-700 line-clamp-3">
                                "${entry.message.length > 100 ? entry.message.substring(0, 100) + '...' : entry.message}"
                            </div>
                        </div>
                        
                        <p class="text-xs text-red-600 font-medium">‚ö†Ô∏è Questa azione non pu√≤ essere annullata!</p>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button onclick="cancelDeleteDiary()" 
                                class="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium py-2 px-4 rounded-lg transition-colors">
                            ‚ùå Annulla
                        </button>
                        <button onclick="deleteDiaryEntry(${index})" 
                                class="flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            üóëÔ∏è Elimina
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
        }

        function cancelDeleteDiary() {
            const modal = document.querySelector('.fixed.inset-0.bg-black');
            if (modal) {
                document.body.removeChild(modal);
                document.body.style.overflow = 'auto';
            }
        }

        function deleteDiaryEntry(index) {
            const entries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
            entries.splice(index, 1);
            localStorage.setItem('sriLankaDiary', JSON.stringify(entries));
            
            // Close modal
            cancelDeleteDiary();
            
            // Reload entries
            loadDiaryEntries();
            
            // Show success message
            showDeleteSuccessMessage();
        }

        function showDeleteSuccessMessage() {
            // Create temporary success message
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 transform transition-all duration-300';
            successDiv.innerHTML = '‚úÖ Post eliminato dal diario!';
            
            document.body.appendChild(successDiv);
            
            // Animate in
            setTimeout(() => {
                successDiv.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                successDiv.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(successDiv)) {
                        document.body.removeChild(successDiv);
                    }
                }, 300);
            }, 3000);
        }

        function exportDiary() {
            const entries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
            
            if (entries.length === 0) {
                alert('Il diario √® vuoto! Aggiungi qualche ricordo prima di esportare.');
                return;
            }

            // Sort entries by date (oldest first for chronological order)
            entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

            let diaryContent = `üìñ DIARIO DI BORDO - SRI LANKA 360¬∞ SUMMER EDITION
üóìÔ∏è 18-29 Agosto 2025
üë• Gruppo WeRoad

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

`;

            entries.forEach((entry, index) => {
                const entryDate = new Date(entry.timestamp);
                const formattedDate = entryDate.toLocaleDateString('it-IT', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                diaryContent += `üìù ENTRY #${index + 1}
üìÖ ${formattedDate}
‚úçÔ∏è ${entry.author}`;

                if (entry.location) {
                    diaryContent += `\nüìç ${entry.location}`;
                }

                diaryContent += `\n\n${entry.message}\n\n`;
                diaryContent += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n`;
            });

            diaryContent += `üéØ STATISTICHE DIARIO:
‚Ä¢ Totale entries: ${entries.length}
‚Ä¢ Primo ricordo: ${new Date(entries[0].timestamp).toLocaleDateString('it-IT')}
‚Ä¢ Ultimo ricordo: ${new Date(entries[entries.length - 1].timestamp).toLocaleDateString('it-IT')}

üíù Generato automaticamente dal sistema Sri Lanka 360¬∞
üåç Un ricordo indimenticabile del nostro viaggio insieme!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`;

            // Create and download file
            const blob = new Blob([diaryContent], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Diario_Sri_Lanka_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            // Show success message
            const button = document.querySelector('button[onclick="exportDiary()"]');
            const originalText = button.innerHTML;
            button.innerHTML = '‚úÖ Diario scaricato!';
            button.className = 'w-full bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.className = 'w-full bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm';
            }, 3000);
        }

        // Diary PDF Export Function
        function exportDiaryPDF() {
            const entries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
            
            if (entries.length === 0) {
                alert('Il diario √® vuoto! Aggiungi qualche ricordo prima di esportare in PDF.');
                return;
            }

            const button = document.querySelector('button[onclick="exportDiaryPDF()"]');
            const originalHTML = button.innerHTML;
            
            // Show loading state
            button.innerHTML = '‚è≥ Generando PDF...';
            button.disabled = true;
            button.className = 'bg-gray-400 text-white font-medium py-2 px-4 rounded-lg text-sm cursor-not-allowed';

            // Use setTimeout to allow UI update
            setTimeout(() => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    
                    // Helper function to clean text from emojis and invalid characters
                    function cleanText(text) {
                        return text
                            .replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '')
                            .replace(/[^\x00-\x7F]/g, '')
                            .replace(/\s+/g, ' ')
                            .trim();
                    }
                    
                    // Set up fonts and colors
                    const primaryColor = [30, 41, 59]; // slate-800
                    const secondaryColor = [71, 85, 105]; // slate-600
                    const accentColor = [234, 88, 12]; // orange-600
                    
                    let yPosition = 20;
                    const pageHeight = 297;
                    const margin = 20;
                    const lineHeight = 7;
                    
                    // Helper function to add new page if needed
                    function checkPageBreak(neededSpace = 20) {
                        if (yPosition + neededSpace > pageHeight - margin) {
                            doc.addPage();
                            yPosition = 20;
                            return true;
                        }
                        return false;
                    }
                    
                    // Helper function to add text with word wrap
                    function addWrappedText(text, x, y, maxWidth, fontSize = 10) {
                        const cleanedText = cleanText(text);
                        doc.setFontSize(fontSize);
                        const lines = doc.splitTextToSize(cleanedText, maxWidth);
                        lines.forEach((line, index) => {
                            if (y + (index * lineHeight) > pageHeight - margin) {
                                doc.addPage();
                                y = 20;
                            }
                            doc.text(line, x, y + (index * lineHeight));
                        });
                        return y + (lines.length * lineHeight);
                    }
                    
                    // Title Page
                    doc.setTextColor(...primaryColor);
                    doc.setFontSize(24);
                    doc.setFont('helvetica', 'bold');
                    doc.text('DIARIO DI BORDO', 105, 40, { align: 'center' });
                    
                    doc.setFontSize(18);
                    doc.setTextColor(...accentColor);
                    doc.text('Sri Lanka 360¬∞ Summer Edition', 105, 55, { align: 'center' });
                    
                    doc.setFontSize(12);
                    doc.setTextColor(...secondaryColor);
                    doc.text('18-29 Agosto 2025 ‚Ä¢ Gruppo WeRoad', 105, 70, { align: 'center' });
                    
                    // Add decorative elements
                    doc.setDrawColor(...accentColor);
                    doc.setLineWidth(0.5);
                    doc.line(40, 80, 170, 80);
                    
                    yPosition = 100;
                    
                    // Diary Overview
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(14);
                    doc.setTextColor(...primaryColor);
                    doc.text('I NOSTRI RICORDI CONDIVISI', margin, yPosition);
                    yPosition += 15;
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    doc.setTextColor(...secondaryColor);
                    
                    // Sort entries by date (oldest first for chronological order)
                    const sortedEntries = [...entries].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
                    
                    const overview = `Questo diario raccoglie tutti i momenti speciali, le emozioni e i ricordi che abbiamo condiviso durante il nostro incredibile viaggio in Sri Lanka.

Totale ricordi: ${entries.length}
Primo ricordo: ${new Date(sortedEntries[0].timestamp).toLocaleDateString('it-IT')}
Ultimo ricordo: ${new Date(sortedEntries[sortedEntries.length - 1].timestamp).toLocaleDateString('it-IT')}

Ogni entry rappresenta un pezzo del nostro cuore lasciato in questa meravigliosa isola.`;
                    
                    yPosition = addWrappedText(overview, margin, yPosition, 170);
                    yPosition += 15;
                    
                    // Diary Entries
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.setTextColor(...primaryColor);
                    doc.text('TUTTI I NOSTRI RICORDI', margin, yPosition);
                    yPosition += 15;
                    
                    sortedEntries.forEach((entry, index) => {
                        checkPageBreak(30);
                        
                        const entryDate = new Date(entry.timestamp);
                        const formattedDate = entryDate.toLocaleDateString('it-IT', { 
                            weekday: 'long',
                            day: '2-digit',
                            month: 'long',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        
                        // Entry number and author
                        doc.setFont('helvetica', 'bold');
                        doc.setFontSize(11);
                        doc.setTextColor(...accentColor);
                        doc.text(`${index + 1}. ${cleanText(entry.author)}`, margin, yPosition);
                        yPosition += 8;
                        
                        // Date and location
                        doc.setFont('helvetica', 'normal');
                        doc.setFontSize(9);
                        doc.setTextColor(...secondaryColor);
                        let headerText = formattedDate;
                        if (entry.location) {
                            headerText += ` ‚Ä¢ ${cleanText(entry.location)}`;
                        }
                        yPosition = addWrappedText(headerText, margin + 5, yPosition, 165, 9);
                        yPosition += 5;
                        
                        // Entry content
                        doc.setTextColor(...primaryColor);
                        doc.setFontSize(10);
                        yPosition = addWrappedText(entry.message, margin + 5, yPosition, 165, 10);
                        yPosition += 10;
                        
                        // Separator line
                        doc.setDrawColor(200, 200, 200);
                        doc.setLineWidth(0.3);
                        doc.line(margin, yPosition, 190, yPosition);
                        yPosition += 8;
                    });
                    
                    // Final page with memories summary
                    checkPageBreak(50);
                    doc.setDrawColor(...accentColor);
                    doc.setLineWidth(0.5);
                    doc.line(margin, yPosition, 190, yPosition);
                    yPosition += 15;
                    
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(14);
                    doc.setTextColor(...primaryColor);
                    doc.text('GRAZIE PER QUESTI RICORDI!', 105, yPosition, { align: 'center' });
                    yPosition += 15;
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    doc.setTextColor(...secondaryColor);
                    const finalMessage = `Ogni parola scritta in questo diario rappresenta un momento unico e irripetibile del nostro viaggio insieme. 

Questi ricordi sono il tesoro piu prezioso che portiamo a casa dallo Sri Lanka: non solo le foto e i souvenir, ma le emozioni, le risate, le scoperte e le connessioni umane che abbiamo creato.

Grazie a tutti per aver condiviso i vostri pensieri e per aver reso questo viaggio ancora piu speciale.

Sri Lanka 360¬∞ Summer Edition sara per sempre nei nostri cuori.`;
                    
                    yPosition = addWrappedText(finalMessage, margin, yPosition, 170, 10);
                    yPosition += 20;
                    
                    // Footer
                    doc.setFont('helvetica', 'italic');
                    doc.setFontSize(8);
                    doc.setTextColor(...secondaryColor);
                    doc.text(`Diario generato il ${new Date().toLocaleDateString('it-IT')} ‚Ä¢ WeRoad Sri Lanka 360¬∞`, 105, yPosition, { align: 'center' });
                    
                    // Save the PDF
                    doc.save(`Diario_Sri_Lanka_360_${new Date().toISOString().split('T')[0]}.pdf`);
                    
                    // Success state
                    button.innerHTML = '‚úÖ PDF Scaricato!';
                    button.className = 'bg-green-600 text-white font-medium py-2 px-4 rounded-lg text-sm';
                    
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.className = 'bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm';
                        button.disabled = false;
                    }, 3000);
                    
                } catch (error) {
                    console.error('Errore nella generazione del PDF del diario:', error);
                    
                    // Error state
                    button.innerHTML = '‚ùå Errore PDF';
                    button.className = 'bg-red-600 text-white font-medium py-2 px-4 rounded-lg text-sm';
                    
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.className = 'bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 text-sm';
                        button.disabled = false;
                    }, 3000);
                }
            }, 100);
        }

        // PDF Generation Function
        function generatePDF() {
            const button = document.querySelector('button[onclick="generatePDF()"]');
            const originalHTML = button.innerHTML;
            
            // Helper function to clean text from emojis and invalid characters
            function cleanText(text) {
                // Remove emojis and special Unicode characters that might cause PDF issues
                return text
                    .replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '')
                    .replace(/[^\x00-\x7F]/g, '') // Remove non-ASCII characters
                    .replace(/\s+/g, ' ') // Replace multiple spaces with single space
                    .trim();
            }
            
            // Show loading state
            button.innerHTML = `
                <span class="flex items-center justify-center space-x-3">
                    <span>Generando PDF...</span>
                    <span class="text-sm opacity-75">(Un attimo!)</span>
                </span>
            `;
            button.disabled = true;
            button.className = 'bg-gradient-to-r from-gray-400 to-gray-500 text-white font-semibold py-4 px-8 rounded-xl shadow-lg text-lg cursor-not-allowed';

            // Use setTimeout to allow UI update
            setTimeout(() => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    
                    // Set up fonts and colors
                    const primaryColor = [30, 41, 59]; // slate-800
                    const secondaryColor = [71, 85, 105]; // slate-600
                    const accentColor = [59, 130, 246]; // blue-500
                    
                    let yPosition = 20;
                    const pageHeight = 297;
                    const margin = 20;
                    const lineHeight = 7;
                    
                    // Helper function to add new page if needed
                    function checkPageBreak(neededSpace = 20) {
                        if (yPosition + neededSpace > pageHeight - margin) {
                            doc.addPage();
                            yPosition = 20;
                            return true;
                        }
                        return false;
                    }
                    
                    // Helper function to add text with word wrap
                    function addWrappedText(text, x, y, maxWidth, fontSize = 10) {
                        const cleanedText = cleanText(text);
                        doc.setFontSize(fontSize);
                        const lines = doc.splitTextToSize(cleanedText, maxWidth);
                        lines.forEach((line, index) => {
                            if (y + (index * lineHeight) > pageHeight - margin) {
                                doc.addPage();
                                y = 20;
                            }
                            doc.text(line, x, y + (index * lineHeight));
                        });
                        return y + (lines.length * lineHeight);
                    }
                    
                    // Title Page
                    doc.setTextColor(...primaryColor);
                    doc.setFontSize(28);
                    doc.setFont('helvetica', 'bold');
                    doc.text('SRI LANKA 360', 105, 40, { align: 'center' });
                    
                    doc.setFontSize(16);
                    doc.setFont('helvetica', 'normal');
                    doc.text('Summer Edition', 105, 55, { align: 'center' });
                    
                    doc.setFontSize(14);
                    doc.setTextColor(...secondaryColor);
                    doc.text('18 AGOSTO - 29 AGOSTO 2025', 105, 70, { align: 'center' });
                    
                    // Add decorative elements
                    doc.setDrawColor(...accentColor);
                    doc.setLineWidth(0.5);
                    doc.line(40, 80, 170, 80);
                    
                    doc.setFontSize(12);
                    doc.setTextColor(...primaryColor);
                    yPosition = 100;
                    
                    // Trip Overview
                    doc.setFont('helvetica', 'bold');
                    doc.text('PANORAMICA DEL VIAGGIO', margin, yPosition);
                    yPosition += 15;
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    const overview = `Un'avventura di 12 giorni alla scoperta della "Lacrima dell'Oceano Indiano". Dalle antiche citta storiche alle spiagge paradisiache, dalle piantagioni di te alle riserve naturali.

- 12 giorni di avventura
- 13 persone nel gruppo
- 6 siti UNESCO da visitare
- Safari, trekking, cultura e relax`;
                    
                    yPosition = addWrappedText(overview, margin, yPosition, 170);
                    yPosition += 10;
                    
                    // Itinerary
                    checkPageBreak(40);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.text('ITINERARIO DETTAGLIATO', margin, yPosition);
                    yPosition += 15;
                    
                    const itinerary = [
                        'Giorno 1 - Arrivo a Negombo',
                        'Giorno 2 - Galle (Fortezza UNESCO)',
                        'Giorno 3 - Udawalawe National Park (Safari)',
                        'Giorno 4 - Ella (Treno panoramico)',
                        'Giorno 5 - Nuwara Eliya (Piantagioni di te)',
                        'Giorno 6 - Kandy (Tempio del Dente)',
                        'Giorno 7 - Dambulla (Grotte dorate)',
                        'Giorno 8 - Sigiriya e Polonnaruwa',
                        'Giorno 9 - Trincomalee/Pasikudah',
                        'Giorno 10 - Trincomalee/Pasikudah',
                        'Giorno 11 - Anuradhapura',
                        'Giorno 12 - Partenza'
                    ];
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    itinerary.forEach(day => {
                        checkPageBreak();
                        doc.text(cleanText(day), margin, yPosition);
                        yPosition += lineHeight;
                    });
                    yPosition += 10;
                    
                    // Packing List
                    checkPageBreak(40);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.text('PACKING LIST ESSENZIALE', margin, yPosition);
                    yPosition += 15;
                    
                    const packingItems = [
                        'ABBIGLIAMENTO:',
                        '- Magliette leggere (5-7)',
                        '- Pantaloni leggeri (2-3)',
                        '- Giacca leggera per serate fresche',
                        '- Impermeabile o poncho',
                        '- Costumi da bagno + teli',
                        '- Sarong per templi',
                        '',
                        'SCARPE:',
                        '- Scarpe da trekking comode',
                        '- Sandali/infradito',
                        '- Calzini (utili nei templi)',
                        '',
                        'PROTEZIONE:',
                        '- Crema solare SPF 30+',
                        '- Cappello/cappellino',
                        '- Repellente per insetti',
                        '',
                        'VARIE:',
                        '- Medicine di base',
                        '- Caricabatterie + power bank',
                        '- Adattatore universale',
                        '- Torcia per escursioni'
                    ];
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    packingItems.forEach(item => {
                        checkPageBreak();
                        if (item.endsWith(':')) {
                            doc.setFont('helvetica', 'bold');
                        } else {
                            doc.setFont('helvetica', 'normal');
                        }
                        doc.text(cleanText(item), margin, yPosition);
                        yPosition += lineHeight;
                    });
                    yPosition += 10;
                    
                    // Checklist
                    checkPageBreak(40);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.text('CHECKLIST PRE-PARTENZA', margin, yPosition);
                    yPosition += 15;
                    
                    const checklist = [
                        'DOCUMENTI (URGENTE):',
                        '[ ] Richiedere ETA (Electronic Travel Authorization)',
                        '[ ] Compilare Arrival Card online',
                        '[ ] Verificare validita passaporto (min. 6 mesi)',
                        '',
                        'BANCA E DENARO:',
                        '[ ] Avvisare la banca del viaggio',
                        '[ ] Verificare limiti prelievo estero',
                        '[ ] Prelevare contanti per cambio locale',
                        '',
                        'SALUTE:',
                        '[ ] Copia assicurazione WeRoad',
                        '[ ] Kit farmaci personali',
                        '',
                        'TECNOLOGIA:',
                        '[ ] Scaricare app offline (Maps.me, Google Translate)',
                        '[ ] Piano dati roaming o SIM locale',
                        '[ ] Backup foto e documenti su cloud'
                    ];
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    checklist.forEach(item => {
                        checkPageBreak();
                        if (item.endsWith(':')) {
                            doc.setFont('helvetica', 'bold');
                        } else {
                            doc.setFont('helvetica', 'normal');
                        }
                        doc.text(cleanText(item), margin, yPosition);
                        yPosition += lineHeight;
                    });
                    yPosition += 10;
                    
                    // Emergency Contacts
                    checkPageBreak(40);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.text('CONTATTI IMPORTANTI', margin, yPosition);
                    yPosition += 15;
                    
                    const contacts = [
                        'COORDINATRICE - SABRINA:',
                        'Tel: +39 3477257071',
                        'Email: cocosabrina.wr@gmail.com',
                        'Email: sabrina_coco@hotmail.it',
                        'Instagram: @awild.coco',
                        '',
                        'EMERGENZE SRI LANKA:',
                        'Polizia: 119',
                        'Ambulanza: 110',
                        'Vigili del Fuoco: 111',
                        'Emergenze Turistiche: 1912',
                        '',
                        'AMBASCIATA ITALIANA:',
                        'Indirizzo: 55, Jawatte Road, Colombo 5',
                        'Tel: +94 11 2588388',
                        'Email: ambasciata.colombo@esteri.it'
                    ];
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    contacts.forEach(item => {
                        checkPageBreak();
                        if (item.endsWith(':')) {
                            doc.setFont('helvetica', 'bold');
                        } else {
                            doc.setFont('helvetica', 'normal');
                        }
                        doc.text(cleanText(item), margin, yPosition);
                        yPosition += lineHeight;
                    });
                    yPosition += 10;
                    
                    // Diary Entries
                    const diaryEntries = JSON.parse(localStorage.getItem('sriLankaDiary') || '[]');
                    if (diaryEntries.length > 0) {
                        checkPageBreak(40);
                        doc.setFont('helvetica', 'bold');
                        doc.setFontSize(12);
                        doc.text('DIARIO DI BORDO DEL GRUPPO', margin, yPosition);
                        yPosition += 15;
                        
                        doc.setFont('helvetica', 'normal');
                        doc.setFontSize(9);
                        doc.text(`I nostri ricordi condivisi durante il viaggio (${diaryEntries.length} entries):`, margin, yPosition);
                        yPosition += 10;
                        
                        // Sort entries by date (oldest first for chronological order)
                        const sortedEntries = [...diaryEntries].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
                        
                        sortedEntries.forEach((entry, index) => {
                            checkPageBreak(25);
                            
                            const entryDate = new Date(entry.timestamp);
                            const formattedDate = entryDate.toLocaleDateString('it-IT', { 
                                day: '2-digit',
                                month: '2-digit',
                                hour: '2-digit',
                                minute: '2-digit'
                            });
                            
                            // Entry header
                            doc.setFont('helvetica', 'bold');
                            doc.setFontSize(9);
                            doc.text(`${index + 1}. ${cleanText(entry.author)}`, margin, yPosition);
                            
                            doc.setFont('helvetica', 'normal');
                            doc.setFontSize(8);
                            doc.setTextColor(...secondaryColor);
                            let headerText = `${formattedDate}`;
                            if (entry.location) {
                                headerText += ` - ${cleanText(entry.location)}`;
                            }
                            doc.text(headerText, margin + 50, yPosition);
                            yPosition += 8;
                            
                            // Entry content
                            doc.setTextColor(...primaryColor);
                            doc.setFontSize(9);
                            yPosition = addWrappedText(entry.message, margin + 5, yPosition, 165, 9);
                            yPosition += 8;
                            
                            // Separator line
                            doc.setDrawColor(200, 200, 200);
                            doc.setLineWidth(0.2);
                            doc.line(margin, yPosition, 190, yPosition);
                            yPosition += 5;
                        });
                        yPosition += 5;
                    }
                    
                    // Cultural Tips
                    checkPageBreak(40);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.setTextColor(...primaryColor);
                    doc.text('CONSIGLI CULTURALI', margin, yPosition);
                    yPosition += 15;
                    
                    const culturalTips = `TEMPLI E SITI RELIGIOSI:
- Vestiti coprendo spalle e gambe
- Togliere scarpe e cappelli
- Non voltare le spalle alle statue di Buddha
- Portare calzini per camminare
- Rispettare il silenzio durante le preghiere

SITI ARCHEOLOGICI:
- Iniziare presto per evitare il caldo
- Portare acqua e cappello
- Scarpe comode per camminare
- Crema solare (il sole e forte)

VALUTA E PAGAMENTI:
- Valuta locale: Rupia dello Sri Lanka (LKR)
- Cambio approssimativo: 1 EUR = 330-350 LKR
- Contanti preferiti nei mercati locali
- Carte accettate in hotel e ristoranti principali`;
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    yPosition = addWrappedText(culturalTips, margin, yPosition, 170, 9);
                    yPosition += 10;
                    
                    // Footer
                    checkPageBreak(30);
                    doc.setDrawColor(...accentColor);
                    doc.line(margin, yPosition, 190, yPosition);
                    yPosition += 10;
                    
                    doc.setFont('helvetica', 'italic');
                    doc.setFontSize(8);
                    doc.setTextColor(...secondaryColor);
                    doc.text('Generato automaticamente dal sistema Sri Lanka 360 - WeRoad Summer Edition', 105, yPosition, { align: 'center' });
                    yPosition += 5;
                    doc.text(`Data generazione: ${new Date().toLocaleDateString('it-IT')}`, 105, yPosition, { align: 'center' });
                    
                    // Save the PDF
                    doc.save(`Sri_Lanka_360_Guida_Completa_${new Date().toISOString().split('T')[0]}.pdf`);
                    
                    // Success state
                    button.innerHTML = `
                        <span class="flex items-center justify-center space-x-3">
                            <span>PDF Scaricato!</span>
                            <span class="text-sm opacity-75">(Controllate i download!)</span>
                        </span>
                    `;
                    button.className = 'bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold py-4 px-8 rounded-xl shadow-lg text-lg';
                    
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.className = 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-lg';
                        button.disabled = false;
                    }, 3000);
                    
                } catch (error) {
                    console.error('Errore nella generazione del PDF:', error);
                    
                    // Error state
                    button.innerHTML = `
                        <span class="flex items-center justify-center space-x-3">
                            <span>Errore PDF</span>
                            <span class="text-sm opacity-75">(Riprova!)</span>
                        </span>
                    `;
                    button.className = 'bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold py-4 px-8 rounded-xl shadow-lg text-lg';
                    
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.className = 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-lg';
                        button.disabled = false;
                    }, 3000);
                }
            }, 100);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96e90b01727d4c3a',t:'MTc1NTA5NjgxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
